<!DOCTYPE html>
<html lang="en">
<head>
    <title>Serendipity Styx Edition - Help Center [en] | Plugin-API | ophian.github.io</title>
    <meta charset="UTF-8">
    <meta name="description" content="Serendipity Styx is a PHP-powered weblog engine giving users an easy way to maintain a blog and developers a framework with the power for professional applications.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="Serendipity Styx Edition - Help Center [en] | Plugin-API | Styx is what Serendipity should be | ophian.github.io">
    <meta property="og:site_name" content="Serendipity Styx Blog System">
    <meta property="og:description" content="Serendipity Styx is a PHP-powered weblog engine giving users an easy way to maintain a blog and developers a framework with the power for professional applications.">
    <meta property="og:image" content="https://ophian.github.io/i/styx-opengraph.jpg">
    <meta property="og:url" content="https://ophian.github.io/hc/en/plugin-api.html">
    <link rel="canonical" href="https://ophian.github.io/hc/en/plugin-api.html">
    <link rel="apple-touch-icon" href="/i/apple-touch-icon.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito|Nunito+Sans">
    <link rel="stylesheet" href="/css/libs.min.css">
    <link rel="stylesheet" href="/css/styx.min.css">
</head>
<body>
<ul class="skip-link__list">
    <li class="skip-link skip-link--main-nav">
        <a href="#main-navigation" tabindex="1">Main navigation</a>
    </li>
    <li class="skip-link skip-link--main-repo"><a href="#main-repository" tabindex="1">Styx Repository</a></li>
    <li class="skip-link skip-link--main-content"><a href="#main-content" tabindex="1">Styx Main content</a></li>
</ul>
<div class="menu menu--no-hero menu--tiny ">
    <div class="menu__page-title">
        <h1><a href="/hc/en">Serendipity Styx Edition - Documentation [en]</a></h1>
    </div>
    <div class="progress-bar" aria-hidden="true"><span class="progress-bar__fill"></span></div>
</div>
<div class="site-nav site-nav--no-hero menu--tiny">
    <button class="site-nav__toggler" id="site-nav__toggler" aria-label="Show website navigation" aria-expanded="false" tabindex="1">
        <span class="bar" aria-hidden="true"></span>
        <span class="bar" aria-hidden="true"></span>
        <span class="bar" aria-hidden="true"></span>
    </button>
</div>
<div class="site-nav__panel" aria-hidden="true" aria-controls="site-nav__toggler">
    <nav id="main-navigation" role="navigation" aria-label="main navigation">
        <ul class="site-nav__menu">
            <li class="site-nav__menu-item site-nav__menu-item--current"><a href="/hc/en" tabindex="-1" title="Serendipity Styx Help Center [en]">Documentation [en]</a></li>
        </ul>
        <p class="site-nav__menu-category">Main</p>
        <ul class="site-nav__menu" aria-label="links to styx site main pages">
            <li class="site-nav__menu-item"><a href="/" tabindex="-1" title="Serendipity Styx Home">Styx Home</a></li>
            <li class="site-nav__menu-item"><a href="/blog/" tabindex="-1" title="Serendipity Styx Blog">Styx Blog</a></li>
            <li class="site-nav__menu-item"><a href="/blog/archives/" tabindex="-1" title="Serendipity Styx Blog Archives">Styx Blog Archives</a></li>
            <li class="site-nav__menu-item"><a href="/atom.xml" tabindex="-1" title="Serendipity Styx Blog Feed">Styx Blog Feed</a></li>
            <li class="site-nav__menu-item"><a href="/about/" tabindex="-1" title="About Serendipity Styx">About Styx</a></li>
        </ul>
        <p class="site-nav__menu-category">Spartacus</p>
        <ul class="site-nav__menu" aria-label="links to styx spartacus pages">
            <li class="site-nav__menu-item"><a href="/plugins/" tabindex="-1" title="Serendipity Styx Spartacus Plugins">Styx Spartacus Plugins</a></li>
            <li class="site-nav__menu-item"><a href="/themes/" tabindex="-1" title="Serendipity Styx Spartacus Themes">Styx Spartacus Themes</a></li>
        </ul>
        <p class="site-nav__menu-category">Repository</p>
        <ul class="site-nav__menu" aria-label="links to styx repository pages">
            <li class="site-nav__menu-item"><a class="icon icon--small" href="https://github.com/ophian/styx" target="_blank" rel="noopener" tabindex="-1" title="GitHub Serendipity Styx Code"><svg class="icon__body"><use xlink:href="#github"></use></svg> Styx Code</a></li>
            <li class="site-nav__menu-item"><a class="icon icon--small" href="https://github.com/ophian/styx/releases" target="_blank" rel="noopener" tabindex="-1" title="GitHub Serendipity Styx Releases"><svg class="icon__body"><use xlink:href="#github"></use></svg> Styx Downloads</a></li>
            <li class="site-nav__menu-item"><a class="icon icon--small" href="https://github.com/ophian/additional_plugins" target="_blank" rel="noopener" tabindex="-1" title="GitHub Serendipity Styx Plugins"><svg class="icon__body"><use xlink:href="#github"></use></svg> Styx Plugins</a></li>
            <li class="site-nav__menu-item"><a class="icon icon--small" href="https://github.com/ophian/styx/issues" target="_blank" rel="noopener" tabindex="-1" title="GitHub Serendipity Styx Issues"><svg class="icon__body"><use xlink:href="#github"></use></svg> Styx Issues</a></li>
        </ul>
        <p class="site-nav__menu-category">Book</p>
        <ul class="site-nav__menu" aria-label="link book page">
            <li class="site-nav__menu-item"><a href="/book/" tabindex="-1" title="Documentation Serendipity Styx Book [de] page">Styx Book [de]</a></li>
        </ul>
        <p class="site-nav__menu-category">Connect & Help</p>
        <ul class="site-nav__menu" aria-label="links connect and help pages">
            <li class="site-nav__menu-item"><a href="/hc/" tabindex="-1" title="Serendipity Styx Help Center">Help center</a></li>
            <li class="site-nav__menu-item"><a href="/hc/de/" tabindex="-1" title="Serendipity Styx Hilfeseiten">Hilfeseiten</a></li>
            <li class="site-nav__menu-item"><a href="/hc/en/faq/" tabindex="-1" title="Serendipity Styx FAQ">Styx FAQ</a></li>
            <li class="site-nav__menu-item"><a href="/contact/" tabindex="-1" title="Serendipity Styx Contact">Contact Styx</a></li>
        </ul>
    </nav>
</div>
<div class="site-cover"></div>
<main class="site-content site-content--col site-content--no-hero site-content--simple" id="main-content" role="main">
    <section class="section site-col" data-reading-progress="true">
        <div class="col">
            <div class="col-menu__wrapper">
                <nav class="col-menu" role="navigation" aria-label="Help Center [en] documents navigation">
                    <ul>
                        <li><a href="/hc/"><img src="/i/info_icon-64.png" width="32" height="32"> Styx Help Center</a></li>
                        <li><a href="/hc/en/">Documentation [en]</a></li>
                        <li><a href="/hc/de/">Dokumentation [de]</a></li>
                        <li><a href="/hc/en/faq/">Styx Help Center FAQ</a></li>
                    </ul>
                </nav>
            </div>
            <div class="col-document__wrapper col-document__wrapper-documents">
                <div class="col-document">
                    <h1><span class="hc-home"><a href="index.html" title="Styx Help Center [en] - Documentation">⌘</a></span> Styx - Plugin-API</h1>
                    <h2>Plugin API</h2>

<ul id="markdown-toc">
  <li><a href="#docs-creating-a-simple-sidebar-plugin" id="toc-docs-creating-a-simple-sidebar-plugin">Creating a simple sidebar plugin</a></li>
  <li><a href="#docs-creating-a-simple-event-plugin" id="toc-docs-creating-a-simple-event-plugin">Creating a simple event plugin</a></li>
  <li><a href="#docs-creating-bundled-plugins" id="toc-docs-creating-bundled-plugins">Creating bundled plugins</a></li>
  <li><a href="#docs-structure-of-serendipity_plugin-in-detail" id="toc-docs-structure-of-serendipity_plugin-in-detail">Structure of serendipity_plugin in detail</a>
    <ul>
      <li><a href="#docs-the-introspectpropbag-method" id="toc-docs-the-introspectpropbag-method">The introspect($propbag) method</a></li>
      <li><a href="#docs-the-generate_contenttitle-method" id="toc-docs-the-generate_contenttitle-method">The generate_content(&amp;$title) method</a></li>
      <li><a href="#docs-adding-configuration-options-to-your-plugin-introspect_config_item-get_config-set_config-validate" id="toc-docs-adding-configuration-options-to-your-plugin-introspect_config_item-get_config-set_config-validate">Adding configuration options to your plugin: introspect_config_item(), get_config(), set_config(), validate()</a></li>
      <li><a href="#docs-more-methods-for-plugins" id="toc-docs-more-methods-for-plugins">More methods for plugins</a>
        <ul>
          <li><a href="#docs-performconfigbag" id="toc-docs-performconfigbag">performConfig(&amp;$bag)</a></li>
          <li><a href="#docs-install" id="toc-docs-install">install()</a></li>
          <li><a href="#docs-uninstall" id="toc-docs-uninstall">uninstall()</a></li>
          <li><a href="#docs-cleanup" id="toc-docs-cleanup">cleanup()</a></li>
          <li><a href="#docs-parsetemplatefilename" id="toc-docs-parsetemplatefilename">parseTemplate($filename)</a></li>
          <li><a href="#docs-register_dependenciesremove-authorid" id="toc-docs-register_dependenciesremove-authorid">register_dependencies($remove, $authorid)</a></li>
          <li><a href="#docs-validateconfig_item-bag-value" id="toc-docs-validateconfig_item-bag-value">validate($config_item, &amp;$bag, &amp;$value)</a></li>
        </ul>
      </li>
      <li><a href="#docs-class-member-variables" id="toc-docs-class-member-variables">Class member variables</a></li>
    </ul>
  </li>
  <li><a href="#docs-structure-of-serendipity_event-in-detail" id="toc-docs-structure-of-serendipity_event-in-detail">Structure of serendipity_event in detail</a></li>
  <li><a href="#docs-more-examples" id="toc-docs-more-examples">More examples</a>
    <ul>
      <li><a href="#docs-how-to-make-an-event-plugin-create-its-own-backend-menu-entries" id="toc-docs-how-to-make-an-event-plugin-create-its-own-backend-menu-entries">How to make an event plugin create its own Backend menu entries</a></li>
      <li><a href="#docs-how-to-create-an-event-plugin-that-performs-an-action-when-an-entry-is-saved" id="toc-docs-how-to-create-an-event-plugin-that-performs-an-action-when-an-entry-is-saved">How to create an event plugin that performs an action when an entry is saved</a></li>
      <li><a href="#docs-how-to-create-an-event-plugin-that-transforms-entry-markup" id="toc-docs-how-to-create-an-event-plugin-that-transforms-entry-markup">How to create an event plugin that transforms entry markup</a></li>
      <li><a href="#docs-how-to-create-an-event-plugin-that-shows-remote-data-or-its-distinct-output" id="toc-docs-how-to-create-an-event-plugin-that-shows-remote-data-or-its-distinct-output">How to create an event plugin that shows remote data or its distinct output</a></li>
      <li><a href="#docs-important-event-hooks" id="toc-docs-important-event-hooks">Important event hooks</a></li>
      <li><a href="#docs-other-event-hooks" id="toc-docs-other-event-hooks">Other event hooks</a></li>
    </ul>
  </li>
  <li><a href="#docs-how-to-use-events-in-smarty" id="toc-docs-how-to-use-events-in-smarty">How to use events in Smarty</a></li>
  <li><a href="#docs-creating-new-event-hooks" id="toc-docs-creating-new-event-hooks">Creating new event hooks</a></li>
  <li><a href="#docs-linking-spartacus" id="toc-docs-linking-spartacus">Linking Spartacus</a></li>
</ul>

<p>The general meaning of Plugins for Serendipity is described in the section <a href="using-plugins.html">Plugins</a> of our documentation.</p>

<p>This page provides more in depth description of the inner workings.</p>

<p>All plugins in Serendipity are objects that are inherited from the base class as defined in “include/plugin_api.inc.php”. This offers the layout of a simple <code>serendipity_event</code> or <code>serendipity_plugin</code> class. If you extend your plugin from this class, you can customize it with its own methods.</p>

<p>Internally, Serendipity uses the plugin API to get a list of all installed plugins, loads them into one large array, iterates on all plugin files to query their configuration. Through the use of the <code>serendipity_plugin_api::hook_event()</code> static method, the core can fire events at a specific part in the code flow.</p>

<p>Once this method is called, it checks the list of all loaded plugins if any plugin is interested to “react” on a given event. If so, the method “hook_event()” of a plugin is executed, and gets passed the <code>$eventData</code> and <code>$addData</code> on which it can operate and return output or modified variables.</p>

<p>Sidebar plugins operate a bit simpler, because basically there only is one single <code>generate_content()</code> method call for when the output of a sidebar plugin is presented.</p>

<p>This might sound more complicated than it is, so let’s create the most simple form of a plugin there is:</p>

<h3 id="docs-creating-a-simple-sidebar-plugin">Creating a simple sidebar plugin</h3>

<ol>
  <li>Create a new directory like “serendipity_plugin_myfirstplugin” in the “plugins” subdirectory of Serendipity. Note that sidebar plugins always need to be prefixed with “serendipity_plugin_”!</li>
  <li>Create a new file “serendipity_plugin_myfirstplugin.php” in the directory you created earlier. Note that the plugin filename needs to exactly match the directory name.</li>
  <li>Now use this code for the created file:</li>
</ol>

<pre><code>&lt;?php
// This line makes sure that plugins can only be called from the Serendipity Framework.
if (IN_serendipity !== true) {
    die ("Don't hack!");
}

// Load possible language files.
@serendipity_plugin_api::load_language(dirname(__FILE__));

// Extend the base class
class serendipity_plugin_myfirstplugin extends serendipity_plugin {
    var $title = MYFIRSTPLUGIN_TITLE;

    // Setup metadata
    function introspect(&amp;$propbag) {
        $propbag-&gt;add('name', MYFIRSTPLUGIN_TITLE);
    }

    // Return content
    function generate_content(&amp;$title) {
        $title = $this-&gt;title;
        echo "Hello world!";
    }
}
?&gt;</code></pre>

<ol>
  <li>Now we need a new language file for the constants we refer to (MYFIRSTPLUGIN_TITLE). Create a simple file “lang_en.inc.php” (for the english language) with this content:</li>
</ol>

<pre><code>&lt;?php
@define('MYFIRSTPLUGIN_TITLE', 'This is my first plugin');
?&gt;</code></pre>

<p>And that’s it for the plugin! You can now log into your plugin configuration management page and install the sidebar plugin. On the Frontend, it will simply show you a “Hello world” statement.</p>

<p>Now let’s dissect the plugin code above:</p>

<ol>
  <li>The first thing is a hack-protection code, you can simply copy and paste this in new plugins</li>
  <li>The second thing is a language loaded. Depending on the language of the blog, it searches for files like “lang_de.inc.php” (also in UTF-8 subdirectory of the plugin) and loads the constants. Also, it falls back to the english language file, which is the only required file you need.</li>
  <li>Now the extension of the class is done. Note that the name of the plugin class needs to match exactly the name of the file (minus the extension “.php”).</li>
  <li>There is one class member variable $title that holds the title of a plugin, and uses the language constant we defined.</li>
  <li>Then we have two methods: One is an introspect() method, which sets up several metadata values for your plugin. The other is the generate_content() method which is used for output.</li>
</ol>

<p>You can use this simply example to extend your plugin to perform any PHP action you like. Of course you can also create as many helper methods inside the class that you will need. You can also include other libraries at this point, and use the full range of Serendipity API methods.</p>

<h3 id="docs-creating-a-simple-event-plugin">Creating a simple event plugin</h3>

<p>An event plugin shares many similarities with the setup of a sidebar plugin. To create an event plugin follow these steps:</p>

<ol>
  <li>Create a new directory like “serendipity_event_myfirstplugin” in the “plugins” subdirectory of Serendipity. Note that event plugins always need to be prefixed with “serendipity_event_”!</li>
  <li>Create a new file “serendipity_event_myfirstplugin.php” in the directory you created earlier. Note that the plugin filename needs to exactly match the directory name.</li>
  <li>Now use this code for the created file:</li>
</ol>

<pre><code>&lt;?php

// This line makes sure that plugins can only be called from the Serendipity Framework.
if (IN_serendipity !== true) {
    die ("Don't hack!");
}

// Load possible language files.
@serendipity_plugin_api::load_language(dirname(__FILE__));

// Extend the base class
class serendipity_event_myfirstplugin extends serendipity_plugin {
    var $title = MYFIRSTPLUGIN_TITLE;

    // Setup metadata
    function introspect(&amp;$propbag) {
        $propbag-&gt;add('name', MYFIRSTPLUGIN_TITLE);
        $propbag-&gt;add('event_hooks', array('frontend_header' =&gt; true));
    }

    // Setup title
    function generate_content(&amp;$title) {
        $title = $this-&gt;title;
    }

    // Listen on events
    function event_hook($event, &amp;$bag, &amp;$eventData, $addData = null) {
        global $serendipity;

        $hooks = &amp;$bag-&gt;get('event_hooks');

        if (isset($hooks[$event])) {
            switch($event) {
                case 'frontend_header':
                    echo '<!-- Hello world! -->';
                    break;

                default:
                    return false;
            }
            return true;
        } else {
            return false;
        }
    }
}
?&gt;</code></pre>

<ol>
  <li>Now we need a new language file for the constants we refer to (MYFIRSTPLUGIN_TITLE). Create a simple file “lang_en.inc.php” (for the english language) with this content:</li>
</ol>

<pre><code>&lt;?php
@define('MYFIRSTPLUGIN_TITLE', 'This is my first plugin');
?&gt;</code></pre>

<p>And that’s it for the plugin! You can now log into your plugin configuration management page and install the event plugin. On the Frontend, it will simply show you a “Hello world” comment statement inside the HTML head section.</p>

<p>The thing that differentiates the eventplugin from the sidebar plugin is the central “event_hook” method and an additional property bag attribute “event_hooks” in the introspect() method. This sets up the events on which the plugin listens, and inside the event_hook() method it checks if the currently called hook matches with the one it wants to execute.</p>

<p>You can simply expand the array in the property bag for multiple event hooks; each array key can represent an event hook name. Then in the event_hook() method, you need to enhance the central switch() statement to check for additional hooks.</p>

<p>If you want you can of course create separate methods for each hook you want to call, if you find that easier to read:</p>

<pre><code>function event_hook($event, &amp;$bag, &amp;$eventData, $addData = null) {
    global $serendipity;

    $hooks = &amp;$bag-&gt;get('event_hooks');

   if (isset($hooks[$event])) {
       $this-&gt;$event($eventData, $addData);
       return true;
    } else {
        return false;
    }
}

function frontend_header(&amp;$eventData, $addData) {
    // Do something
}

function frontend_footer(&amp;$eventData, $addData) {
    // Do something
}</code></pre>

<p>Note that <code>$eventData</code> is a referenced array which you can write to and modify. The <code>$addData</code> is additional read-only data that certain hooks specify for context or metadata.</p>

<p>Also note that if you want to access the <code>$serendipity</code> array, you will need to import that from the global scope.</p>

<h3 id="docs-creating-bundled-plugins">Creating bundled plugins</h3>

<p>As you may have noted due to the naming scheme, you can only put one single plugin into one single directory. So you cannot bundle multiple event plugins in one directory. Also note that Serendipity recursively iterates your plugin directories - so never create a “backup” directory within a plugin with the same directory/filenames like your plugin, because Serendipity will try to load these files.</p>

<p>You can however, bundle one event and sidebar plugin within the same directory, because Serendipity actually only needs the filename to match the classname and can ignore the directory name. We just advise for clarity to name the directories distinctively matching either the sidebar or event plugin name.</p>

<p>With a setup like this you can bundle event and sidebar plugins, because often a plugin provides both event functionality and sidebar functionality. Those plugins can, if they reside in the same directory, access the same language constants and also other central shared classfiles that you can include. In Spartacus, the serendipity_plugin_adduser and serendipity_event_adduser plugins are a good example of such a bundled plugin that provides common class names through a “common.inc.php” file.</p>

<p>When creating bundled plugins you can even link them together with a dependencies-property (see below)</p>

<h3 id="docs-structure-of-serendipity_plugin-in-detail">Structure of serendipity_plugin in detail</h3>

<p>Now that the basic groundwork of a plugin is clear, let’s build on that and show you what more is available.</p>

<h4 id="docs-the-introspectpropbag-method">The introspect($propbag) method</h4>

<p>The introspect() method exists so that a plugin can advertise its metadata to the core framework. It gets passed a central serendipity_property_bag() object which is a simple getter/setter object for any kind of storage.</p>

<p>The property bag can hold any kind of metadata:</p>

<pre><code>$bag = new serendipity_property_bag();

// Set data:
$bag-&gt;add('version', '1.0-alpha1');
$bag-&gt;add('an array', array(1,2,3));
// ...

// Retrieve the data:
echo $bag-&gt;get('version');</code></pre>

<p>Internally Serendipity offers those property bag attributes:</p>

<ul>
  <li><strong>name</strong>: A string that indicates the displayed name of the plugin. Should also be set to the <code>$title</code> class member variable, and in the referenced <code>$title</code> variable that is passed to <code>generate_content()</code>.</li>
  <li><strong>description</strong>: A string that describes the plugin.</li>
  <li><strong>author</strong>: A string that describes the authorship</li>
  <li><strong>copyright</strong>: A string that describes the used license</li>
  <li><strong>version</strong>: A version number (use versions like X.Y.Z); If you contribute a plugin, each following version needs to be “higher” than the one before: After 1.10 follows 1.11 and not 1.2!</li>
  <li><strong>website</strong>: A string that can hold a URL to the author’s site</li>
  <li><strong>stackable</strong>: If set to TRUE, a plugin can be installed multiple times.</li>
  <li><strong>requirements</strong>: Can hold an array with the keys “php”, “smarty” and “serendipity” that indicates the minimum version number required to run the plugin.</li>
  <li><strong>groups</strong>: Can hold an array with values like “MARKUP”, “FRONTEND” etc. that indicate in which group a plugin belongs. A constant like “PLUGIN_GROUP_XXX” needs to exist for the group to be accepted; check the lang/serendipity_lang_en.inc.php file for available matching constants (like IMAGES, MARKUP, ANTISPAM, FRONTEND_FEATURES, …)</li>
  <li><strong>configuration</strong>: Can hold an array of available configuration items.</li>
  <li><strong>Dependencies</strong>: are registered through the <code>$this-&gt;dependencies</code> class member variable (see below)</li>
</ul>

<p>Note that you can use a property bag to pass along any other kind of variables. The property bag is a temporary storage; it is setup and queries every time the plugin is instantiated; it does not persist on requests. To persist session data, simply use the PHP $_SESSION superglobal array. You can permanently store data through the plugin API’s set_config() method, which is described later on.</p>

<p>Here is an example of a completely filled property bag:</p>

<pre><code>function introspect(&amp;$propbag) {
    $propbag-&gt;add('name', MYFIRSTPLUGIN_TITLE);
    $propbag-&gt;add('description', 'It does nothing yet!);
    $propbag-&gt;add('author', 'Garvin Hicking');
    $propbag-&gt;add('copyright', 'GPL');
    $propbag-&gt;add('version', '1.0');
    $propbag-&gt;add('website', 'http://garv.in/');
    $propbag-&gt;add('stackable', true);
    $propbag-&gt;add('requirements', array('php' =&gt; '5.4.0', 'smarty' =&gt; '3.1.0', 'serendipity' =&gt; '2.4.0'));
    $propbag-&gt;add('groups', array('MARKUP', 'FRONTEND_FEATURES'));
    $propbag-&gt;add('configuration', array('title', 'subtitle', 'mood'));
    $this-&gt;dependencies = array('serendipity_event_myfirstplugin' =&gt; 'keep');
}</code></pre>

<h4 id="docs-the-generate_contenttitle-method">The generate_content(&amp;$title) method</h4>

<p>For sidebar plugins, <code>generate_content()</code> is the central “main” method that returns the output. Note that <code>$title</code> is passed as a referenced variable where you set a plugin’s title and can overwrite that variable (or display it).</p>

<h4 id="docs-adding-configuration-options-to-your-plugin-introspect_config_item-get_config-set_config-validate">Adding configuration options to your plugin: introspect_config_item(), get_config(), set_config(), validate()</h4>

<p>To permanently store configuration inside your plugin, you first need to setup an array of available configuration keys in the <code>introspect()</code> property bag:</p>

<pre><code>$propbag-&gt;add('configuration', array('title', 'subtitle', 'mood'));
</code></pre>

<p>When this is done, your plugin needs to define a <code>introspect_config_item()</code> method like this:</p>

<pre><code>function introspect_config_item($name, &amp;$propbag) {
   switch($name) {
       case 'title':
           $propbag-&gt;add('type',        'html');
           $propbag-&gt;add('name',        'Enter the title');
           $propbag-&gt;add('default',     '');
           break;

       case 'subtitle':
	        $propbag-&gt;add('type',        'boolean');
	        $propbag-&gt;add('name',        'Should a subtitle (mood) be used?');
	        $propbag-&gt;add('description', 'If this is disabled, the mood is not shown in the output.');
	        $propbag-&gt;add('default',     'false');
	        break;

       case 'mood':
	        $propbag-&gt;add('type',        'string');
	        $propbag-&gt;add('name',        'What is your mood?');
	        $propbag-&gt;add('default',     "You wouldn't like me when I'm angry.");
	        break;

       default:
    	  return false;
   }
   return true;
}</code></pre>

<p>As you can see, for each configuration option that is available, you can setup a central switch/case structure. Then for each configuration option you setup a configuration property bag that supports a list of options.</p>

<p>The available property keys are actually the same as for theme options, and they are described here: <a href="templating.html#docs-configuration-keys">Configuration keys</a>.</p>

<p>On top of that, each property bag can also have these keys:</p>

<ul>
  <li><strong>validate</strong>: Allows to validate the input for a configuration option, can be set to: <code>string</code>, <code>words</code>, <code>number</code>, <code>url</code>, <code>mail</code>, <code>path</code>. If none of these matches, the validation is interpreted as a regular expression.</li>
  <li><strong>validate_error:</strong> If set, contains a specific error message when validation fails. If not set a generic error message will be displayed when the user saves the configuration.</li>
</ul>

<p>Inside the plugin (i.e. in the generate_content()) method you can use this code to access the values:</p>

<pre><code>function generate_content(&amp;$title) {
    echo "Title: " . $this-&gt;get_config('title');
    if (serendipity_db_bool($this-&gt;get_config('subtitle')) {
        echo "Mood: " . $this-&gt;get_config('mood');
    }
}</code></pre>

<p>Be sure to always wrap <code>serendipity_db_bool()</code> around stored boolean values. Also make sure to escape output with <code>serendipity_specialchars()</code> if you pass through configuration values that shall not be interpreted as HTML!</p>

<p>You can store/overwrite configuration values inside a plugin:</p>

<pre><code>function generate_content(&amp;$title) {
    $this-&gt;set_config('last_run', time());
}</code></pre>

<p>Those internal configuration values do NOT need to be advertised in the ‘configuration’ introspection bag, you can use them distinctly.</p>

<p>The values are stored in the serendipity_config database table and prefixed with the name of the plugin that it belongs to. If you need to store large amounts of data, it is better to create your own database tables for a plugin (by using <code>serendipity_db_schema_import(“CREATE TABLE…”)</code>).</p>

<h4 id="docs-more-methods-for-plugins">More methods for plugins</h4>

<p>There are a couple of more methods of the serendipity_plugin class that are called:</p>

<h5 id="docs-performconfigbag">performConfig(&amp;$bag)</h5>

<p>This method is executed when the Serendipity configuration screen of a plugin is displayed. In this you can execute PHP code that should only be executed when configuring the plugin, and not every time the plugin is loaded.</p>

<h5 id="docs-install">install()</h5>

<p>This method is called when the plugin is installed.</p>

<h5 id="docs-uninstall">uninstall()</h5>

<p>This method is called when a plugin is uninstalled. You can use it to clean up variables or perform specific tasks.</p>

<h5 id="docs-cleanup">cleanup()</h5>

<p>This is called whenever the user saves the configuration and configuration values were updated/saved. You can use that for possible garbage collection.</p>

<h5 id="docs-parsetemplatefilename">parseTemplate($filename)</h5>

<p>This helper method can be called to render a Smarty template file inside the plugin directory path.</p>

<h5 id="docs-register_dependenciesremove-authorid">register_dependencies($remove, $authorid)</h5>

<p>This is performed when a plugin has dependencies and those related plugins are uninstalled or installed. Usually you should not need to modify this piece of code, but if you have specific dependency management, you can.</p>

<h5 id="docs-validateconfig_item-bag-value">validate($config_item, &amp;$bag, &amp;$value)</h5>

<p>This is the default validation class. It is provided by the Serendipity API and should work for most validation scenarios, but if it doesn’t, you can overwrite it.</p>

<h4 id="docs-class-member-variables">Class member variables</h4>

<p>The serendipity_plugin class offers several member variables:</p>

<ul class="plainList">
  <li><code>$instance</code>: Holds the unique instance ID of a plugin</li>
  <li><code>$protected</code>: If set to “true” only the owner of a plugin can configure it (set for “dangerous” plugins)</li>
  <li><code>$wrap_class</code>: The CSS class in which a sidebar plugin is wrapped into</li>
  <li><code>$title_class</code>: The CSS class in which the title of a sidebar plugin is wrapped into</li>
  <li><code>$content_class</code>: The CSS class in which the content of a sidebar plugin is wrapped into</li>
  <li><code>$title</code>: The title of the plugin (used for the output)</li>
  <li><code>$pluginPath</code>: The internal path to the plugin file</li>
  <li><code>$act_pluginPath</code>: The resolved internal path to the plugin file</li>
  <li><code>$pluginFile</code>: The plugin filename</li>
  <li><code>$serendipity_owner</code>: The initial owner of the plugin (who installed it)</li>
  <li><code>$dependencies</code>: A possible array of dependencies. Each array keys represents a plugin class name, and the value can either be “remove” or “keep”, which influences what happens to the bundled plugin when it’s siblings are removed.</li>
</ul>

<h3 id="docs-structure-of-serendipity_event-in-detail">Structure of serendipity_event in detail</h3>

<p>The <code>serendipity_event</code> class inherits all methods and class member variables like <code>serendipity_plugin</code> (see above).</p>

<p>It only adds the method:</p>

<ul>
  <li><strong>event_hook($event, &amp;$bag, &amp;$eventData, $addData = null)</strong>: Central method to route events (see example)</li>
</ul>

<p>And this property bag attribute:</p>

<ul>
  <li><strong>event_hooks</strong>: Array of event hooks that a plugin wants to listen on (see example)</li>
  <li><strong>cachable_events</strong>: Array of cachable event hooks (usually only for markup text plugins)</li>
</ul>

<h3 id="docs-more-examples" class="hspace">More examples</h3>

<h4 id="docs-how-to-make-an-event-plugin-create-its-own-backend-menu-entries">How to make an event plugin create its own Backend menu entries</h4>

<p><strong>Example</strong> on how to create a plugin that hooks in the admin menu via: backend_sidebar_entries_event_display_XXX</p>

<pre><code>&lt;?php

if (IN_serendipity !== true) {
    die ("Don't hack!");
}

@serendipity_plugin_api::load_language(dirname(__FILE__));

class serendipity_event_backpage extends serendipity_event
{
    var $title = PLUGIN_EVENT_BACKPAGE_NAME;

    function introspect(&$propbag)
    {
        global $serendipity;

        $propbag-&gt;add('name',          PLUGIN_EVENT_BACKPAGE_NAME);
        $propbag-&gt;add('description',   PLUGIN_EVENT_BACKPAGE_DESC);
        $propbag-&gt;add('stackable',     false);
        $propbag-&gt;add('author',        'Ian');
        $propbag-&gt;add('version',       '1.00');
        $propbag-&gt;add('requirements',  array(
            'serendipity' =&gt; '2.0.0',
            'smarty'      =&gt; '3.1.0',
            'php'         =&gt; '5.6.0'
        ));
        $propbag-&gt;add('event_hooks',   array(
            'backend_sidebar_admin_appearance' =&gt; true,
            'backend_sidebar_entries_event_display_backpage' =&gt; true
        ));
        $propbag-&gt;add('groups', array('BACKEND_ADMIN', 'BACKEND_FEATURES'));
    }

    function generate_content(&$title)
    {
        $title = $this-&gt;title;
    }

    function callPluginDisplayFunction()
    {
        // fetch example data
        // do something
        echo $data;
    }

    function event_hook($event, &$bag, &$eventData, $addData = null)
    {
        global $serendipity;

        $hooks = &$bag-&gt;get('event_hooks');

        if (isset($hooks[$event])) {

            switch($event) {

                case 'backend_sidebar_admin_appearance':
?&gt;
                        &lt;li&gt;&lt;a href="?serendipity[adminModule]=event_display&amp;serendipity[adminAction]=backpage"&gt;&lt;?php echo PLUGIN_EVENT_BACKPAGE_NAME; ?&gt;&lt;/a&gt;&lt;/li&gt;
&lt;?php
                    }
                    break;

                case 'backend_sidebar_entries_event_display_backpage':
                    echo '&lt;h2&gt;My Backpage&lt;/h2&gt;';
                    $this-&gt;callPluginDisplayFunction();
                    break;

                default:
                    return false;

            }
            return true;
        } else {
            return false;
        }
    }

}

/* vim: set sts=4 ts=4 expandtab : */
?&gt;</code></pre><br>

<h4 id="docs-how-to-create-an-event-plugin-that-performs-an-action-when-an-entry-is-saved">How to create an event plugin that performs an action when an entry is saved</h4>

<p><strong>Example</strong> on how to do “something” when an entry is saved</p>

<pre><code>&lt;?php

if (IN_serendipity !== true) {
    die ("Don't hack!");
}

@serendipity_plugin_api::load_language(dirname(__FILE__));

class serendipity_event_backpage extends serendipity_event
{
    var $title = PLUGIN_EVENT_BACKPAGE_NAME;

    function introspect(&$propbag)
    {
        global $serendipity;

        $propbag-&gt;add('name',          PLUGIN_EVENT_BACKPAGE_NAME);
        $propbag-&gt;add('description',   PLUGIN_EVENT_BACKPAGE_DESC);
        $propbag-&gt;add('stackable',     false);
        $propbag-&gt;add('author',        'Ian');
        $propbag-&gt;add('version',       '1.00');
        $propbag-&gt;add('requirements',  array(
            'serendipity' =&gt; '2.0.0',
            'smarty'      =&gt; '3.1.0',
            'php'         =&gt; '5.6.0'
        ));
        $propbag-&gt;add('event_hooks',   array(
            'backend_sidebar_admin_appearance' =&gt; true,
            'backend_sidebar_entries_event_display_backpage' =&gt; true,
            'backend_publish' =&gt; true,
            'backend_save' =&gt; true
        ));
        $propbag-&gt;add('groups', array('BACKEND_ADMIN', 'BACKEND_FEATURES'));
    }

    function generate_content(&$title)
    {
        $title = $this-&gt;title;
    }

    function callPluginDisplayFunction()
    {
        // fetch example data
        // do something
        echo $data;
    }

    function addProperties(&$properties, &$eventData)
    {
        global $serendipity;
        // Get existing data
        $property = serendipity_fetchEntryProperties($eventData['id']);
        $supported_properties = array('attach_block');

        foreach($supported_properties AS $prop_key) {
            $prop_val = isset($properties[$prop_key]) ? $properties[$prop_key] : null;
            $prop_key = 'ep_' . $prop_key;

            if (is_array($prop_val)) {
                $prop_val = ";" . implode(';', $prop_val) . ";";
            }

            $q = "DELETE FROM {$serendipity['dbPrefix']}entryproperties WHERE entryid = " . (int)$eventData['id'] . " AND property = '" . serendipity_db_escape_string($prop_key) . "'";
            serendipity_db_query($q);

            if (!empty($prop_val)) {
                $q = "INSERT INTO {$serendipity['dbPrefix']}entryproperties (entryid, property, value) VALUES (" . (int)$eventData['id'] . ", '" . serendipity_db_escape_string($prop_key) . "', '" . serendipity_db_escape_string($prop_val) . "')";
                serendipity_db_query($q);
            }
        }
    }

    function event_hook($event, &$bag, &$eventData, $addData = null)
    {
        global $serendipity;

        $hooks = &$bag-&gt;get('event_hooks');

        if (isset($hooks[$event])) {

            switch($event) {

                case 'backend_sidebar_admin_appearance':
?&gt;
                        &lt;li&gt;&lt;a href="?serendipity[adminModule]=event_display&amp;serendipity[adminAction]=backpage"&gt;&lt;?php echo PLUGIN_EVENT_BACKPAGE_NAME; ?&gt;&lt;/a&gt;&lt;/li&gt;
&lt;?php
                    }
                    break;

                case 'backend_sidebar_entries_event_display_backpage':
                    echo '&lt;h2&gt;My Backpage&lt;/h2&gt;';
                    $this-&gt;callPluginDisplayFunction();
                    break;

                case 'backend_publish':
                case 'backend_save':
                    if (!isset($serendipity['POST']['properties']) || !is_array($serendipity['POST']['properties']) || !isset($eventData['id'])) {
                        return true;
                    }

                    $this->addProperties($serendipity['POST']['properties'], $eventData);
                    break;

                default:
                    return false;

            }
            return true;
        } else {
            return false;
        }
    }

}

/* vim: set sts=4 ts=4 expandtab : */
?&gt;</code></pre><br>

<h4 id="docs-how-to-create-an-event-plugin-that-transforms-entry-markup">How to create an event plugin that transforms entry markup</h4>

<p><strong>Example</strong> on how to create a plugin that does something on Frontend_display</p>

<pre><code>&lt;?php

if (IN_serendipity !== true) {
    die ("Don't hack!");
}

@serendipity_plugin_api::load_language(dirname(__FILE__));

class serendipity_event_backpage extends serendipity_event
{
    var $title = PLUGIN_EVENT_BACKPAGE_NAME;

    function introspect(&$propbag)
    {
        global $serendipity;

        $propbag-&gt;add('name',          PLUGIN_EVENT_BACKPAGE_NAME);
        $propbag-&gt;add('description',   PLUGIN_EVENT_BACKPAGE_DESC);
        $propbag-&gt;add('stackable',     false);
        $propbag-&gt;add('author',        'Ian');
        $propbag-&gt;add('version',       '1.00');
        $propbag-&gt;add('requirements',  array(
            'serendipity' =&gt; '2.0.0',
            'smarty'      =&gt; '3.1.0',
            'php'         =&gt; '5.6.0'
        ));
        $propbag-&gt;add('event_hooks',   array(
            'frontend_display' =&gt; true,
            'backend_sidebar_admin_appearance' =&gt; true,
            'backend_sidebar_entries_event_display_backpage' =&gt; true,
            'backend_publish' =&gt; true,
            'backend_save' =&gt; true
        ));
        $propbag-&gt;add('groups', array('BACKEND_ADMIN', 'BACKEND_FEATURES'));
    }

    function generate_content(&$title)
    {
        $title = $this-&gt;title;
    }

    function callPluginDisplayFunction()
    {
        // fetch example data
        // do something
        echo $data;
    }

    function addProperties(&$properties, &$eventData)
    {
        global $serendipity;
        // Get existing data
        ... see previous example
        }
    }

    function event_hook($event, &$bag, &$eventData, $addData = null)
    {
        global $serendipity;

        $hooks = &$bag-&gt;get('event_hooks');

        if (isset($hooks[$event])) {

            switch($event) {

                case 'frontend_display':
                    foreach ($this->markup_elements AS $temp) {
                        if (serendipity_db_bool($this->get_config($temp['name'], true)) && isset($eventData[$temp['element']]) &&
                            @!$eventData['properties']['ep_disable_markup_' . $this->instance] &&
                            !isset($serendipity['POST']['properties']['disable_markup_' . $this->instance])) {
                            $element = $temp['element'];
                            $eventData[$element] = $this-markupTransform($eventData[$element]);
                        }
                    }
                    break;

                case 'backend_sidebar_admin_appearance':
?&gt;
                        &lt;li&gt;&lt;a href="?serendipity[adminModule]=event_display&amp;serendipity[adminAction]=backpage"&gt;&lt;?php echo PLUGIN_EVENT_BACKPAGE_NAME; ?&gt;&lt;/a&gt;&lt;/li&gt;
&lt;?php
                    }
                    break;

                case 'backend_sidebar_entries_event_display_backpage':
                    echo '&lt;h2&gt;My Backpage&lt;/h2&gt;';
                    $this-&gt;callPluginDisplayFunction();
                    break;

                case 'backend_publish':
                case 'backend_save':
                    if (!isset($serendipity['POST']['properties']) || !is_array($serendipity['POST']['properties']) || !isset($eventData['id'])) {
                        return true;
                    }

                    $this-&gt;addProperties($serendipity['POST']['properties'], $eventData);
                    break;

                default:
                    return false;

            }
            return true;
        } else {
            return false;
        }
    }

}

/* vim: set sts=4 ts=4 expandtab : */
?&gt;</code></pre><br>

<h4 id="docs-how-to-create-an-event-plugin-that-shows-remote-data-or-its-distinct-output">How to create an event plugin that shows remote data or its distinct output</h4>

<p><strong>Example</strong> for 'external_plugin' hook</p>

<pre><code>&lt;?php

if (IN_serendipity !== true) {
    die ("Don't hack!");
}

@serendipity_plugin_api::load_language(dirname(__FILE__));

class serendipity_event_backpage extends serendipity_event
{
    var $title = PLUGIN_EVENT_BACKPAGE_NAME;

    function introspect(&$propbag)
    {
        global $serendipity;

        $propbag-&gt;add('name',          PLUGIN_EVENT_BACKPAGE_NAME);
        $propbag-&gt;add('description',   PLUGIN_EVENT_BACKPAGE_DESC);
        $propbag-&gt;add('stackable',     false);
        $propbag-&gt;add('author',        'Ian');
        $propbag-&gt;add('version',       '1.00');
        $propbag-&gt;add('requirements',  array(
            'serendipity' =&gt; '2.0.0',
            'smarty'      =&gt; '3.1.0',
            'php'         =&gt; '5.6.0'
        ));
        $propbag-&gt;add('event_hooks',   array(
            'frontend_display' =&gt; true,
            'external_plugin' =&gt; true,
            'backend_sidebar_admin_appearance' =&gt; true,
            'backend_sidebar_entries_event_display_backpage' =&gt; true,
            'backend_publish' =&gt; true,
            'backend_save' =&gt; true
        ));
        $propbag-&gt;add('configuration',  array('use_backpagelogo'));
        $propbag-&gt;add('groups', array('BACKEND_ADMIN', 'BACKEND_FEATURES'));
    }

    function introspect_config_item($name, &$propbag)
    {
        switch($name) {
            case 'use_backpagelogo':
                $propbag-&gt;add('type',        'content');
                $propbag-&gt;add('name',        PLUGIN_EVENT_BACKPAGE_USELOGO);
                $propbag-&gt;add('description', '');
                $propbag-&gt;add('default',     PLUGIN_EVENT_BACKPAGE_EXTRA_DESC .
                    '&lt;img src="' . $serendipity['baseURL'] . 'index.php?/plugin/backpage.png" alt="" title="' . PLUGIN_EVENT_BACKPAGE_TITLE . '" style="float:right"&gt;');
                break;

            default:
                return false;
        }
        return true;
    }

    function generate_content(&$title)
    {
        $title = $this-&gt;title;
    }

    function callPluginDisplayFunction()
    {
        // fetch example data
        // do something
        echo $data;
    }

    function addProperties(&$properties, &$eventData)
    {
        global $serendipity;
        // Get existing data
        ... see previous example
        }
    }

    function markupTransform($var)
    {
        return string_replace('replaceStringExample', 'withNothingExample', $var);
    }

    function event_hook($event, &$bag, &$eventData, $addData = null)
    {
        global $serendipity;

        $hooks = &$bag-&gt;get('event_hooks');

        if (isset($hooks[$event])) {

            switch($event) {

                case 'frontend_display':
                    foreach ($this->markup_elements AS $temp) {
                        if (serendipity_db_bool($this->get_config($temp['name'], true)) && isset($eventData[$temp['element']]) &&
                            !$eventData['properties']['ep_disable_markup_' . $this->instance] &&
                            !isset($serendipity['POST']['properties']['disable_markup_' . $this->instance])) {
                            $element = $temp['element'];
                            $eventData[$element] = $this-markupTransform($eventData[$element]);
                        }
                    }
                    break;

                case 'backend_sidebar_admin_appearance':
?&gt;
                        &lt;li&gt;&lt;a href="?serendipity[adminModule]=event_display&amp;serendipity[adminAction]=backpage"&gt;&lt;?php echo PLUGIN_EVENT_BACKPAGE_NAME; ?&gt;&lt;/a&gt;&lt;/li&gt;
&lt;?php
                    }
                    break;

                case 'external_plugin':
                    if ($eventData == 'backpage.png') {
                        header('Content-Type: image/png');
                        echo file_get_contents(dirname(__FILE__). '/backpage.png');
                        break;
                    }
                    break;

                case 'backend_sidebar_entries_event_display_backpage':
                    echo '&lt;h2&gt;My Backpage&lt;/h2&gt;';
                    $this-&gt;callPluginDisplayFunction();
                    break;

                case 'backend_publish':
                case 'backend_save':
                    if (!isset($serendipity['POST']['properties']) || !is_array($serendipity['POST']['properties']) || !isset($eventData['id'])) {
                        return true;
                    }

                    $this-&gt;addProperties($serendipity['POST']['properties'], $eventData);
                    break;

                default:
                    return false;

            }
            return true;
        } else {
            return false;
        }
    }

}

/* vim: set sts=4 ts=4 expandtab : */
?&gt;</code></pre><br>

<h4 id="docs-important-event-hooks">Important event hooks</h4>

<p>The easiest way to see how to implement any given event hook is to search in the .php files for: <code>hook_event('XXX')</code> where you replace ‘XXX’ with the name of the event hook you want to look up. There you can also easily see which <code>$eventData</code> is passed to the hook.</p>

<ul>
  <li><strong>css</strong>: Frontend CSS generation</li>
  <li><strong>css_backend</strong>: Backend CSS generation</li>
  <li><strong>js</strong>: Additional javascript Frontend</li>
  <li><strong>js_backend</strong>: Additional javascript Backend</li>
  <li><strong>frontend_configure</strong>: Performed when Frontend is initialized</li>
  <li><strong>backend_configure</strong>: Performed when Backend is initialized</li>
  <li><strong>backend_publish</strong>: Performed when an entry is published</li>
  <li><strong>backend_save</strong>: Performed when an entry is saved (also for drafts!)</li>
  <li><strong>entry_display</strong>: Performed when multiple entries are displayed in the Frontend</li>
  <li><strong>external_plugin</strong>: Execution of external plugins that take over complete page flow</li>
  <li><strong>frontend_display</strong>: Performed when a single entry is displayed in the Frontend</li>
  <li><strong>genpage</strong>: Performed when Smarty framework was initialized</li>
  <li><strong>frontend_display:rss-2.0:namespace</strong>: RSS feed namespace</li>
  <li><strong>frontend_display:atom-1.0:namespace</strong>: RSS feed namespace</li>
  <li><strong>frontend_display:rss-2.0:per_entry</strong>: Single entry display in RSS feed</li>
  <li><strong>frontend_display:atom-1.0:per_entry</strong>: Single entry display in Atom feed</li>
</ul>

<h4 id="docs-other-event-hooks">Other event hooks</h4>

<p>Most of these event hooks have self-explanatory names. You can easily look them up in the codebase by searching for those names, they usually only occur once at a specific place in code.</p>

<ul>
  <li>backend_approvecomment</li>
  <li>backend_auth</li>
  <li>backend_cache_entries</li>
  <li>backend_cache_purge</li>
  <li>backend_category_addNew</li>
  <li>backend_category_delete</li>
  <li>backend_category_showForm</li>
  <li>backend_category_update</li>
  <li>backend_comments_top</li>
  <li>backend_delete_entry</li>
  <li>backend_deletecomment</li>
  <li>backend_directory_create</li>
  <li>backend_directory_delete</li>
  <li>backend_entry_iframe</li>
  <li>backend_entry_presave</li>
  <li>backend_entry_toolbar_body</li>
  <li>backend_entry_updertEntry</li>
  <li>backend_entryform</li>
  <li>backend_entryform_smarty</li>
  <li>backend_entryproperties</li>
  <li>backend_frontpage_display</li>
  <li>backend_http_request</li>
  <li>backend_image_add</li>
  <li>backend_image_addHotlink</li>
  <li>backend_import_entry</li>
  <li>backend_login</li>
  <li>backend_loginfail</li>
  <li>backend_media_check</li>
  <li>backend_media_delete</li>
  <li>backend_media_makethumb</li>
  <li>backend_media_path_exclude_directories</li>
  <li>backend_media_rename</li>
  <li>backend_pluginlisting_header</li>
  <li>backend_pluginlisting_header_upgrade</li>
  <li>backend_plugins_event_header</li>
  <li>backend_plugins_fetchlist</li>
  <li>backend_plugins_fetchplugin</li>
  <li>backend_plugins_install</li>
  <li>backend_plugins_new_instance</li>
  <li>backend_plugins_sidebar_header</li>
  <li>backend_plugins_update</li>
  <li>backend_preview</li>
  <li>backend_sendcomment</li>
  <li>backend_sendmail</li>
  <li>backend_sidebar_entries_event_display_XXX: Custom menu items for plugins to hook into.</li>
  <li>backend_sidebar_entries_event_display_profiles</li>
  <li>backend_staticpages_insert</li>
  <li>backend_staticpages_showform</li>
  <li>backend_staticpages_update</li>
  <li>backend_templates_configuration_bottom</li>
  <li>backend_templates_configuration_none</li>
  <li>backend_templates_configuration_top</li>
  <li>backend_templates_fetchlist</li>
  <li>backend_templates_fetchtemplate</li>
  <li>backend_templates_globalthemeoptions</li>
  <li>backend_templates_install</li>
  <li>backend_thumbnail_filename_select</li>
  <li>backend_trackback_check</li>
  <li>backend_trackbacks</li>
  <li>backend_updatecomment</li>
  <li>backend_users_add</li>
  <li>backend_users_delete</li>
  <li>backend_users_edit</li>
  <li>backend_view_comment</li>
  <li>backend_wysiwyg</li>
  <li>backend_wysiwyg_nuggets</li>
  <li>cronjob</li>
  <li>cronjob_XXX: Executed on cronjob interval, i.e. cronjob_5min, cronjob_30min, …</li>
  <li>entry_groupdata</li>
  <li>fetch_images_sql</li>
  <li>fetchcomments</li>
  <li>frontend_calendar</li>
  <li>frontend_display:html_layout</li>
  <li>frontend_display:rss-1.0:once</li>
  <li>frontend_display:html:per_entry</li>
  <li>frontend_display_cache</li>
  <li>frontend_entries_rss</li>
  <li>frontend_entryproperties</li>
  <li>frontend_entryproperties_query</li>
  <li>frontend_fetchentries</li>
  <li>frontend_fetchentry</li>
  <li>frontend_generate_plugins</li>
  <li>frontend_media_showitem</li>
  <li>frontend_media_showitem_init</li>
  <li>frontend_rss</li>
  <li>frontend_saveComment</li>
  <li>frontend_saveComment_finish</li>
  <li>frontend_sidebar_plugins</li>
  <li>frontend_xmlrpc</li>
  <li>media_getproperties</li>
  <li>media_getproperties_cached</li>
  <li>media_showproperties</li>
  <li>plugin_dashboard_updater</li>
  <li>quicksearch_plugin</li>
</ul>

<h3 id="docs-how-to-use-events-in-smarty">How to use events in Smarty</h3>

<p>You can execute events (also custom ones you created only for your own plugin and theme) easily in Smarty in two ways.</p>

<p>The first way is to simply call an event hook with a function:</p>

<pre><code>{serendipity_hookPlugin hook="my_custom_event" hookAll="true" data="4711" addData=$someArray}</code></pre>

<p>This would then yield the output of what your plugin that listens on “my_custom_event” outputs.</p>

<p>The second way is to call an event hook that modifies a distinct variable:</p>

<pre><code>{$entry.title|serendipity_refhookPlugin:'my_markup_transformation':false}</code></pre>

<p>This would then pass along your $entry.title as a parameter for the my_markup_transformation event hook.</p>

<h3 id="docs-creating-new-event-hooks">Creating new event hooks</h3>

<p>If there is an event hook missing in the current Serendipity code, a single line is sufficient to add new events. Please let our developers know when you think a specific event is missing. (<strong>“Contributing”</strong> via <a href="https://github.com/ophian/styx/issues">GitHub Styx Issues</a>, please.)</p>

<h3 id="docs-linking-spartacus">Linking Spartacus</h3>

<p>You can easily combine the whole Spartacus theme and plugin checkouts on your machine. To do that you can for example checkout these repositories to a subdirectory like <code>templates/spartacus/</code> and <code>plugins/spartacus/</code>. The reason this works is because both the theme and plugin framework of Serendipity can iterate through every subdirectory of the templates/ or plugins/ structure to search for matching plugin/theme files.</p>
                </div>
            </div>
        </div>
        <div class="blog-post__footer">
            <div class="blog-post__footer-author site-col__footer-author-container">
                <div class="blog-post__author-avatar-container">
                    <div class="blog-post__author-avatar blog-post__author-avatar--ophian"></div>
                </div>
                <div class="blog-post__author-description">
                    <h3>Ian Styx (ophian)<span>Maintainer</span></h3>
                    <p class="follow"><a href="https://github.com/ophian/styx/issues" title="Styx issues" target="_blank">@ophian</a></p>
                    <p>John Ian Styx has more than 20 years of experience in the IT market as a developer and from 2003 as a Serendipity lover.</p>
                </div>
            </div>
        </div>
    </section>
</main>
<div class="addthis_float_share_toolbox"></div>
<footer class="footer footer--blog" role="contentinfo">
    <div class="section-container footer-site-map">
        <div class="row footer-menu__row">
            <div class="col-xs-12 col-sm-4 footer-menu__container">
                <div class="footer-menu__wrapper" role="navigation" aria-labelledby="menu-category-1-0">
                    <h2 id="menu-category-1-0">Repository</h2>
                    <ul class="footer-menu">
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx/releases" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Downloads</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Code</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/additional_plugins" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Plugins</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx/issues" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Issues</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 footer-menu__container">
                <div class="footer-menu__wrapper" role="navigation" aria-labelledby="menu-category-1-1">
                    <h2 id="menu-category-1-1">Site & Documentation</h2>
                    <ul class="footer-menu">
                        <li class="icon-site"><a href="/">Serendipity Styx Home</a></li>
                        <li class="icon-site"><a href="/blog/">Serendipity Styx Blog</a></li>
                        <li class="icon-site"><a href="/book/">Serendipity Styx Book [de]</a></li>
                        <li class="icon-site"><a href="/plugins/">Serendipity Styx Plugins</a></li>
                        <li class="icon-site"><a href="/themes/">Serendipity Styx Themes</a></li>
                        <li class="icon-site"><a href="/hc/en/faq/">Serendipity Styx FAQ</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 footer-menu__container">
                <div class="footer-menu__wrapper" role="navigation" aria-labelledby="menu-category-1-2">
                    <h2 id="menu-category-1-2">Connect with Styx</h2>
                    <ul class="footer-menu">
                        <li class="icon-site"><a href="/contact/">Contact us</a></li>
                        <li class="icon-site"><a href="/hc/">Help center</a></li>
                        <li class="icon-site"><a href="/about/">About Styx</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-mobile" role="navigation" aria-hidden="true" data-mobile="true">
        <div class="section-container">
            <div class="row">
                <div class="col-xs-12 col-sm-6 footer-mobile__column">
                    <h2>Repository</h2>
                    <ul class="footer-mobile__menu">
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx/releases" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Downloads</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Code</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/additional_plugins" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Plugins</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx/issues" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Issues</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-6 footer-mobile__column">
                    <h2>Connect with Styx</h2>
                    <ul class="footer-mobile__menu">
                        <li class="icon-site"><a href="/contact/">Contact us</a></li>
                        <li class="icon-site"><a href="/about/">About Styx</a></li>
                        <li class="icon-site"><a href="/hc/">Help center</a></li>
                        <li class="icon-site"><a href="/">Serendipity Styx Home</a></li>
                        <li class="icon-site"><a href="/blog/">Serendipity Styx Blog</a></li>
                        <li class="icon-site"><a href="/book/">Serendipity Styx Book [de]</a></li>
                        <li class="icon-site"><a href="/plugins/">Serendipity Styx Plugins</a></li>
                        <li class="icon-site"><a href="/themes/">Serendipity Styx Themes</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="section-container footer-policy">
        <div class="row">
            <div class="col-xs-12 col-md-6">
                <p class="footer-policy__rights">© 2016 - 2019 Serendipity Styx Edition.</p>
            </div>
            <div class="col-xs-12 col-md-6">
                <ul class="footer-policy__menu">
                    <li class="footer-policy__menu-item"><a href="/legal/">Legal</a></li>
                    <li class="footer-policy__menu-item"><a href="/legal/privacy/">Privacy policy</a></li>
                    <li class="footer-policy__menu-item"><a href="https://opensource.org/docs/definition.php" target="_blank">Open Source</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
	<svg id="github" viewBox="0 0 24 24">
		<title id="simpleicons-github-icon">GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path>
	</svg>
</svg>

<script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery-3.5.0.min.js"><\/script>')</script>
<script src="/js/jquery.ui.totop.js" type="text/javascript"></script>
<script> 
    $(function(){
        $(document).ready(function() {
            $().UItoTop();
        });
    });
</script>
<a href="#" id="toTop" style="display: inline;"><span id="toTopHover"></span>To Top</a>
<script src="/js/styx.min.js"></script>
</body></html>