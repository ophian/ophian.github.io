<!DOCTYPE html>
<html lang="en">
<head>
    <title>Serendipity Styx Edition - Help Center [en] | Templating | ophian.github.io</title>
    <meta charset="UTF-8">
    <meta name="description" content="Serendipity Styx is a PHP-powered weblog engine giving users an easy way to maintain a blog and developers a framework with the power for professional applications.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="Serendipity Styx Edition - Help Center [en] | Templating | Styx is what Serendipity should be | ophian.github.io">
    <meta property="og:site_name" content="Serendipity Styx Blog System">
    <meta property="og:description" content="Serendipity Styx is a PHP-powered weblog engine giving users an easy way to maintain a blog and developers a framework with the power for professional applications.">
    <meta property="og:image" content="https://ophian.github.io/i/styx-opengraph.jpg">
    <meta property="og:url" content="https://ophian.github.io/hc/en/templating.html">
    <link rel="canonical" href="https://ophian.github.io/hc/en/templating.html">
    <link rel="apple-touch-icon" href="/i/apple-touch-icon.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito|Nunito+Sans">
    <link rel="stylesheet" href="/css/libs.min.css">
    <link rel="stylesheet" href="/css/styx.min.css">
</head>
<body>
<ul class="skip-link__list">
    <li class="skip-link skip-link--main-nav">
        <a href="#main-navigation" tabindex="1">Main navigation</a>
    </li>
    <li class="skip-link skip-link--main-repo"><a href="#main-repository" tabindex="1">Styx Repository</a></li>
    <li class="skip-link skip-link--main-content"><a href="#main-content" tabindex="1">Styx Main content</a></li>
</ul>
<div class="menu menu--no-hero menu--tiny ">
    <div class="menu__page-title">
        <h1><a href="/hc/en">Serendipity Styx Edition - Documentation [en]</a></h1>
    </div>
    <div class="progress-bar" aria-hidden="true"><span class="progress-bar__fill"></span></div>
</div>
<div class="site-nav site-nav--no-hero menu--tiny">
    <button class="site-nav__toggler" id="site-nav__toggler" aria-label="Show website navigation" aria-expanded="false" tabindex="1">
        <span class="bar" aria-hidden="true"></span>
        <span class="bar" aria-hidden="true"></span>
        <span class="bar" aria-hidden="true"></span>
    </button>
</div>
<div class="site-nav__panel" aria-hidden="true" aria-controls="site-nav__toggler">
    <nav id="main-navigation" role="navigation" aria-label="main navigation">
        <ul class="site-nav__menu">
            <li class="site-nav__menu-item site-nav__menu-item--current"><a href="/hc/en" tabindex="-1" title="Serendipity Styx Help Center [en]">Documentation [en]</a></li>
        </ul>
        <p class="site-nav__menu-category">Main</p>
        <ul class="site-nav__menu" aria-label="links to styx site main pages">
            <li class="site-nav__menu-item"><a href="/" tabindex="-1" title="Serendipity Styx Home">Styx Home</a></li>
            <li class="site-nav__menu-item"><a href="/blog/" tabindex="-1" title="Serendipity Styx Blog">Styx Blog</a></li>
            <li class="site-nav__menu-item"><a href="/blog/archives/" tabindex="-1" title="Serendipity Styx Blog Archives">Styx Blog Archives</a></li>
            <li class="site-nav__menu-item"><a href="/atom.xml" tabindex="-1" title="Serendipity Styx Blog Feed">Styx Blog Feed</a></li>
            <li class="site-nav__menu-item"><a href="/about/" tabindex="-1" title="About Serendipity Styx">About Styx</a></li>
        </ul>
        <p class="site-nav__menu-category">Spartacus</p>
        <ul class="site-nav__menu" aria-label="links to styx spartacus pages">
            <li class="site-nav__menu-item"><a href="/plugins/" tabindex="-1" title="Serendipity Styx Spartacus Plugins">Styx Spartacus Plugins</a></li>
            <li class="site-nav__menu-item"><a href="/themes/" tabindex="-1" title="Serendipity Styx Spartacus Themes">Styx Spartacus Themes</a></li>
        </ul>
        <p class="site-nav__menu-category">Repository</p>
        <ul class="site-nav__menu" aria-label="links to styx repository pages">
            <li class="site-nav__menu-item"><a class="icon icon--small" href="https://github.com/ophian/styx" target="_blank" rel="noopener" tabindex="-1" title="GitHub Serendipity Styx Code"><svg class="icon__body"><use xlink:href="#github"></use></svg> Styx Code</a></li>
            <li class="site-nav__menu-item"><a class="icon icon--small" href="https://github.com/ophian/styx/releases" target="_blank" rel="noopener" tabindex="-1" title="GitHub Serendipity Styx Releases"><svg class="icon__body"><use xlink:href="#github"></use></svg> Styx Downloads</a></li>
            <li class="site-nav__menu-item"><a class="icon icon--small" href="https://github.com/ophian/additional_plugins" target="_blank" rel="noopener" tabindex="-1" title="GitHub Serendipity Styx Plugins"><svg class="icon__body"><use xlink:href="#github"></use></svg> Styx Plugins</a></li>
            <li class="site-nav__menu-item"><a class="icon icon--small" href="https://github.com/ophian/styx/issues" target="_blank" rel="noopener" tabindex="-1" title="GitHub Serendipity Styx Issues"><svg class="icon__body"><use xlink:href="#github"></use></svg> Styx Issues</a></li>
        </ul>
        <p class="site-nav__menu-category">Book</p>
        <ul class="site-nav__menu" aria-label="link book page">
            <li class="site-nav__menu-item"><a href="/book/" tabindex="-1" title="Documentation Serendipity Styx Book [de] page">Styx Book [de]</a></li>
        </ul>
        <p class="site-nav__menu-category">Connect & Help</p>
        <ul class="site-nav__menu" aria-label="links connect and help pages">
            <li class="site-nav__menu-item"><a href="/hc/" tabindex="-1" title="Serendipity Styx Help Center">Help center</a></li>
            <li class="site-nav__menu-item"><a href="/hc/de/" tabindex="-1" title="Serendipity Styx Hilfeseiten">Hilfeseiten</a></li>
            <li class="site-nav__menu-item"><a href="/hc/en/faq/" tabindex="-1" title="Serendipity Styx FAQ">Styx FAQ</a></li>
            <li class="site-nav__menu-item"><a href="/contact/" tabindex="-1" title="Serendipity Styx Contact">Contact Styx</a></li>
        </ul>
    </nav>
</div>
<div class="site-cover"></div>
<main class="site-content site-content--col site-content--no-hero site-content--simple" id="main-content" role="main">
    <section class="section site-col" data-reading-progress="true">
        <div class="col">
            <div class="col-menu__wrapper">
                <nav class="col-menu" role="navigation" aria-label="Help Center [en] documents navigation">
                    <ul>
                        <li><a href="/hc/"><img src="/i/info_icon-64.png" width="32" height="32"> Styx Help Center</a></li>
                        <li><a href="/hc/en/">Documentation [en]</a></li>
                        <li><a href="/hc/de/">Dokumentation [de]</a></li>
                        <li><a href="/hc/en/faq/">Styx Help Center FAQ</a></li>
                    </ul>
                </nav>
            </div>
            <div class="col-document__wrapper col-document__wrapper-documents">
                <div class="col-document">
                    <h1><span class="hc-home"><a href="index.html" title="Styx Help Center [en] - Documentation">⌘</a></span> Styx - Templating</h1>
                    <h2 id="docs-themes-and-smarty-templating">Themes and Smarty Templating</h2>

                    <ul>
                      <li><a href="#docs-templating">Templating</a>
                        <ul>
                          <li><a href="#docs-smarty">Smarty</a></li>
                          <li><a href="#docs-fallback-templates">Fallback templates</a></li>
                          <li><a href="#docs-frontend-themes">Frontend Themes</a>
                            <ul>
                              <li><a href="#docs-infotxt">info.txt</a></li>
                              <li><a href="#docs-previewpng-preview_fullsizejpg">preview.png, preview_fullsize.jpg</a></li>
                              <li><a href="#docs-configincphp">config.inc.php</a>
                                <ul>
                                  <li><a href="#docs-defining-custom-smarty-functionsmodifiers--executing-custom-php">Defining custom Smarty functions/modifiers / Executing custom PHP</a></li>
                                  <li><a href="#docs-using-smarty-in-entries">Using Smarty in entries</a></li>
                                  <li><a href="#docs-listen-on-plugin-hooks">Listen on Plugin Hooks</a></li>
                                  <li><a href="#docs-custom-entryproperties">Custom Entryproperties</a></li>
                                  <li><a href="#docs-theme-options">Theme Options</a></li>
                                  <li><a href="#docs-configuration-keys">Configuration keys</a></li>
                                  <li><a href="#docs-advanced-theme-options-theme-option-groups">Advanced theme options: Theme option groups</a></li>
                                  <li><a href="#docs-advanced-theme-options-central-navigation">Advanced theme options: Central navigation</a></li>
                                  <li><a href="#docs-internationalization">Internationalization</a></li>
                                  <li><a href="#docs-theme-sidebars">Theme Sidebars</a></li>
                                </ul>
                              </li>
                              <li><a href="#docs-specific-frontend-theme-files-and-their-meaning">Specific FRONTEND theme files and their meaning</a>
                                <ul>
                                  <li><a href="#docs-atomcss">atom.css</a></li>
                                  <li><a href="#docs-style_fallbackcss">style_fallback.css</a></li>
                                  <li><a href="#docs-stylecss">style.css</a></li>
                                  <li><a href="#docs-usercss">user.css</a></li>
                                  <li><a href="#docs-commentformtpl">commentform.tpl</a></li>
                                  <li><a href="#docs-commentpopuptpl">commentpopup.tpl</a></li>
                                  <li><a href="#docs-commentstpl-trackbackstpl">comments.tpl, trackbacks.tpl</a></li>
                                  <li><a href="#docs-comments_by_authortpl">comments_by_author.tpl</a></li>
                                  <li><a href="#docs-contenttpl">content.tpl</a></li>
                                  <li><a href="#docs-entries_archivestpl">entries_archives.tpl</a></li>
                                  <li><a href="#docs-entries_summarytpl">entries_summary.tpl</a></li>
                                  <li><a href="#docs-feed_tpl">feed_*.tpl</a></li>
                                  <li><a href="#docs-indextpl">index.tpl</a></li>
                                  <li><a href="#docs-entriestpl">entries.tpl</a></li>
                                  <li><a href="#docs-plugin_calendartpl-plugin_categoriestpl-plugin_staticpagetpl">plugin_calendar.tpl, plugin_categories.tpl, plugin_staticpage.tpl</a></li>
                                  <li><a href="#docs-preview_iframetpl">preview_iframe.tpl</a></li>
                                  <li><a href="#docs-sidebartpl">sidebar.tpl</a></li>
                                  <li><a href="#docs-media_showitemtpl">media_showitem.tpl</a></li>
                                  <li><a href="#docs-img-subfolder-and-others">img/ subfolder and others</a></li>
                                  <li><a href="#docs-jquery">jQuery</a></li>
                                </ul>
                              </li>
                              <li><a href="#docs-smarty-methods">Smarty methods</a>
                                <ul>
                                  <li><a href="#docs-smarty-modifiers">Smarty modifiers</a></li>
                                  <li><a href="#docs-smarty-functions">Smarty functions</a></li>
                                </ul>
                              </li>
                              <li><a href="#docs-serendipity-smarty-layer">Serendipity Smarty Layer</a></li>
                              <li><a href="#docs-smarty-variables">Smarty variables</a>
                                <ul>
                                  <li><a href="#docs-raw_data-mixed">$raw_data [<span class="vartype-mixed">mixed</span>]</a></li>
                                  <li><a href="#docs-plugin_calendar_weeks-array-plugin_calendar_dow-array-plugin_calendar_head-array">$plugin_calendar_weeks [<span class="vartype-array">array</span>], $plugin_calendar_dow [<span class="vartype-array">array</span>], plugin_calendar_head [<span class="vartype-array">array</span>]</a></li>
                                  <li><a href="#docs-is_form-bool-category_image-string-form_url-string-categories-array">$is_form [<span class="vartype-bool">bool</span>], $category_image [<span class="vartype-str">string</span>], $form_url [<span class="vartype-str">string</span>], $categories [<span class="vartype-array">array</span>]</a></li>
                                  <li><a href="#docs-plugindata-array-pluginside-string">$plugindata [<span class="vartype-array">array</span>], $pluginside [<span class="vartype-str">string</span>]</a></li>
                                  <li><a href="#docs-leftsidebarelements-int-rightsidebarelements-int">$leftSidebarElements [<span class="vartype-int">int</span>], $rightSidebarElements [<span class="vartype-int">int</span>]</a></li>
                                  <li><a href="#docs-leftsidebarelements-int-rightsidebarelements-int">$leftSidebarElements [<span class="vartype-int">int</span>], $rightSidebarElements [<span class="vartype-int">int</span>]</a></li>
                                  <li><a href="#docs-content_message-string">$content_message [<span class="vartype-str">string</span>]</a></li>
                                  <li><a href="#docs-searchresult_tooshort-bool-searchresult_error-bool-searchresult_noentries-bool-searchresult_results-bool">$searchresult_tooShort [<span class="vartype-bool">bool</span>], $searchresult_error [<span class="vartype-bool">bool</span>], $searchresult_noEntries [<span class="vartype-bool">bool</span>], $searchresult_results [<span class="vartype-bool">bool</span>]</a></li>
                                  <li><a href="#docs-startpage-bool">$startpage [<span class="vartype-bool">bool</span>]</a></li>
                                  <li><a href="#docs-uriargs-array">$uriargs [<span class="vartype-array">array</span>]</a></li>
                                  <li><a href="#docs-is_preview-bool">$is_preview [<span class="vartype-bool">bool</span>]</a></li>
                                  <li><a href="#docs-preview-string">$preview [<span class="vartype-str">string</span>]</a></li>
                                  <li><a href="#docs-commentform_action-string-commentform_id-string-commentform_name-bool-commentform_entry-array">$commentform_action [<span class="vartype-str">string</span>], $commentform_id [<span class="vartype-str">string</span>], $commentform_name [<span class="vartype-str">string</span>], $commentform_email [<span class="vartype-str">string</span>], $commentform_url [<span class="vartype-str">string</span>], $commentform_remember [<span class="vartype-str">string</span>], $commentform_replyTo [<span class="vartype-array">array</span>], $commentform_subscribe [<span class="vartype-str">string</span>], $commentform_data [<span class="vartype-str">string</span>], $is_commentform_showToolbar [<span class="vartype-bool">bool</span>], $is_allowSubscriptions [<span class="vartype-bool">bool</span>], $is_moderate_comments [<span class="vartype-bool">bool</span>], $commentform_entry [<span class="vartype-array">array</span>]</a></li>
                                  <li><a href="#docs-comments-array">$comments [<span class="vartype-array">array</span>]</a></li>
                                  <li><a href="#docs-metadata-array-entries-array-is_comments-bool-last_modified-string-channel_display_dat-string">$metadata [<span class="vartype-array">array</span>], $entries [<span class="vartype-array">array</span>], $is_comments [<span class="vartype-bool">bool</span>], $last_modified [<span class="vartype-str">string</span>], $self_url [<span class="vartype-str">string</span>], $namespace_display_dat [<span class="vartype-str">string</span>], $once_display_dat [<span class="vartype-str">string</span>], $channel_display_dat [<span class="vartype-str">string</span>]</a></li>
                                  <li><a href="#docs-entry_id-int-is_comment_added-bool-comment_url-string-comment_string-bool-is_comment_empty-bool">$entry_id [<span class="vartype-int">int</span>], $is_comment_added [<span class="vartype-bool">bool</span>], $comment_url [<span class="vartype-str">string</span>], $comment_string [<span class="vartype-str">string</span>], $is_showtrackbacks [<span class="vartype-bool">bool</span>], $comment_entryurl [<span class="vartype-str">string</span>], $is_showcomments [<span class="vartype-bool">bool</span>], $is_comment_allowed [<span class="vartype-bool">bool</span>], $is_comment_notadded [<span class="vartype-bool">bool</span>], $is_comment_empty [<span class="vartype-bool">bool</span>]</a></li>
                                  <li><a href="#docs-view-string">$view [<span class="vartype-str">string</span>]</a></li>
                                  <li><a href="#docs-footer_prev_page-string-footer_next_page-string-footer_totalentries-string-footer_info-string">$footer_prev_page [<span class="vartype-str">string</span>], $footer_next_page [<span class="vartype-str">string</span>] $footer_totalEntries [<span class="vartype-int">int</span>], $footer_totalPages [<span class="vartype-int">int</span>], $footer_currentPage [<span class="vartype-int">int</span>], $footer_pageLink [<span class="vartype-str">string</span>], $footer_info [<span class="vartype-str">string</span>]</a></li>
                                  <li><a href="#docs-plugin_clean_page-bool-comments_messagestack-array-is_comment_added-bool-is_comment_moderate-bool-entries-array">$plugin_clean_page [<span class="vartype-bool">bool</span>], $comments_messagestack [<span class="vartype-array">array</span>], $is_comment_added [<span class="vartype-bool">bool</span>], $is_comment_moderate [<span class="vartype-bool">bool</span>], $entries [<span class="vartype-array">array</span>]</a></li>
                                  <li><a href="#docs-trackbacks-array">$trackbacks [<span class="vartype-array">array</span>]</a></li>
                                  <li><a href="#docs-head_charset-string-head_version-string-head_title-string-is_logged_in-bool">$head_charset [<span class="vartype-str">string</span>], $head_version [<span class="vartype-str">string</span>] <em>(deprecated)</em>, $head_title [<span class="vartype-str">string</span>], $head_subtitle [<span class="vartype-str">string</span>], $head_link_stylesheet [<span class="vartype-str">string</span>], $is_xhtml [<span class="vartype-bool">bool</span>], $serendipityVersion [<span class="vartype-str">string</span>], $lang [<span class="vartype-str">string</span>], $head_link_script [<span class="vartype-str">string</span>], $head_link_stylesheet_frontend [<span class="vartype-str">string</span>], $is_logged_in [<span class="vartype-bool">bool</span>]</a></li>
                                  <li><a href="#docs-use_popups-bool-is_embedded-bool-is_raw_mode-bool">$use_popups [<span class="vartype-bool">bool</span>], $is_embedded [<span class="vartype-bool">bool</span>], $is_raw_mode [<span class="vartype-bool">bool</span>]</a></li>
                                  <li><a href="#docs-entry_id-int-is_single_entry-bool">$entry_id [<span class="vartype-int">int</span>], $is_single_entry [<span class="vartype-bool">bool</span>]</a></li>
                                  <li><a href="#docs-blogtitle-string-blogsubtitle-string-blogdescription-string">$blogTitle [<span class="vartype-str">string</span>], $blogSubTitle [<span class="vartype-str">string</span>], $blogDescription [<span class="vartype-str">string</span>]</a></li>
                                  <li><a href="#docs-serendipityhttppath-string-serendipitybaseurl-string-serendipityrewriteprefix-string-serendipityindexfile-string">$serendipityHTTPPath [<span class="vartype-str">string</span>], $serendipityBaseURL [<span class="vartype-str">string</span>], $serendipityRewritePrefix [<span class="vartype-str">string</span>], $serendipityIndexFile [<span class="vartype-str">string</span>]</a></li>
                                  <li><a href="#docs-category-int-category_info-array">$category [<span class="vartype-int">int</span>], $category_info [<span class="vartype-array">array</span>]</a></li>
                                  <li><a href="#docs-template-string">$template [<span class="vartype-str">string</span>]</a></li>
                                  <li><a href="#docs-daterange-array">$dateRange [<span class="vartype-array">array</span>]</a></li>
                                  <li><a href="#docs-template_option-array---available-only-for-serendipity-11-and-above">$template_option [<span class="vartype-array">array</span>]</a></li>
                                </ul>
                              </li>
                            </ul>
                          </li>
                          <li><a href="#docs-backend-themes">Backend themes</a></li>
                          <li><a href="#docs-specific-backend-theme-files-and-their-meaning">Specific BACKEND theme files and their meaning</a>
                            <ul>
                              <li><a href="#docs-usercss-1">user.css</a></li>
                              <li><a href="#docs-styling-the-media-manager">Styling the media manager</a></li>
                              <li><a href="#docs-the-core-workflow">The core workflow</a></li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                      <li><a href="#docs-linking-spartacus">Linking Spartacus</a></li>
                      <li><a href="#docs-showing-entries-in-foreign-webpages">Showing entries in foreign webpages</a></li>
                      <li><a href="#docs-you-hate-smarty-youve-come-a-long-way">You hate Smarty? You’ve come a long way!</a>
                        <ul>
                          <li><a href="#docs-step-1-create-a-templateincphp-file">Step 1: Create a template.inc.php file</a></li>
                          <li><a href="#docs-step-2-read-more">Step 2: Read more</a></li>
                          <li><a href="#docs-step-3-create-template-files">Step 3: Create template files</a></li>
                        </ul>
                      </li>
                      <li><a href="#docs-best-practice-for-themes">Best practice for themes</a></li>
                    </ul>

<h2 id="docs-templating">Templating</h2>

<p>A theme is a collection of single template files, and must be put into the “templates/” subdirectory to be available for selection your Blog’s “Manage Themes” admin section.</p>

<p>Themes can either consist of a Frontend Theme, a Backend Theme or provide both. All styling for the Backend is done in a subdirectory “admin” of the theme directory.</p>

<h3 id="docs-smarty">Smarty</h3>

<p>Are you afraid of using PHP? Get the shivers of complexity? Don’t be afraid: Serendipity uses the Smarty PHP templating system, see (http://www.smarty.net). There you can also find a complete description of how it can be used - it is very easy to learn, has a lower entry barrier than using PHP code, and generally “looks” cleaner and simpler to understand.</p>

<p>(Sidestep: You are not afraid of using PHP? See below for the “Template API”, but bear in mind that Smarty is really comfortable to use and you shouldn’t worry about using it. You can place custom PHP code easily in our Plugin API, or even a template’s configuration file).</p>

<p>The general idea is easy: Templates should only contain display logic, and not perform actual algorithms. This is called “separation of concerns”. That means, Serendipity is responsible for executing codeflow and assembling variables that are passed to the output layer (Smarty). Smarty then allows a theme author/frontend developer to place those variables in any arrangement they like. They can use loops and logical “IF”-comparisons to perform some minor logic.</p>

<p>This means, Smarty themes are actually mostly HTML files where you can put in special commands or placeholders. Those are quite easy to learn and use:</p>

<ul>
  <li>Variables are placed through curly brackets and the dollar sign: <code>{$variable}</code></li>
  <li>Arrays can be accessed similar to JavaScript: <code>{$array.subkey}</code></li>
  <li>… but also similar to PHP: <code>{$array['subkey']}</code></li>
  <li>Function calls can be executed with curly brackets: <code>{myFunction param1="something" param2="something else"}</code></li>
  <li>IF-queries can be performed: <code>{if $variable == true}...{/if}</code></li>
  <li>Loops can be performed: <code>{foreach $array AS $key => $value}...{/foreach}</code></li>
  <li>So called “modifiers” can be stacked to operate on a single variable with the “pipe” sign: <code>{$variable|escape|lower}</code></li>
  <li>Modifiers can have parameters: <code>{$variable|format_date:"%d.%m.%Y"}</code></li>
</ul>

<h3 id="docs-fallback-templates">Fallback templates</h3>

<p>A Frontend theme can hold multiple files in its directory and define its custom output. Serendipity contains a lot of individual template files (see below), but very often a theme can work with the default template files that are provided by Serendipity.</p>

<p>To make theme directories as small as possible, and as update- and future-proof as possible, we have a sophisticated scheme of fallbacks for files that are not provided by an individual theme. (Please also see <a href="#template-fallback-cascade">here</a>.)</p>

<p>Let’s take the file ‘entries.tpl’ for example. This template file is used in the Frontend to display both the list of entries and the view of a single entry.</p>

<p>When your Frontend is called and the ‘entries.tpl’ file should be rendered, Serendipity checks for this file like this:</p>

<ul>
  <li>First, check if the currently set theme (for example “my_custom_theme”) has the file ‘entries.tpl’. If yes: Use that file <code>templates/my_custom_theme/entries.tpl</code>.</li>
  <li>Now check the theme’s ‘info.txt’ file and see if the theme defined an “Engine: XXX” which specifies the default fallback directory to use. If “Engine: 2k11 would be contained in the file, then <code>templates/2k11/entries.tpl</code> would be returned.</li>
  <li>The next and last iterated theme to be processed as fallback would be “default/” and this file <code>templates/default/entries.tpl</code> be returned.
</ul>

<p>So for simple extended themes, an “Engine: 2k11” would suffice best!</p>

<p>Make sure that you only copy over those files to your theme directory which you are really going to customize!</p>

<h3 id="docs-frontend-themes">Frontend Themes</h3>

<p>The Frontend theme is the collection of files that are used to show anything on the content.</p>

<p>The most important files of a theme are these:</p>

<h4 id="docs-infotxt">info.txt</h4>

<p>This file is the only required file of a theme directory. It specifies the metadata of a theme. The format of this file is simple and consists of a few “Key: Value” pairs (only one line per key!)</p>

<pre><code>Name: This is the name of your theme
Author: This is what is displayed as "author" in the Backend
Date: The creation date of your theme (any format you like, i.e. YYYY-MM-DD)
Require Serendipity: [VERSION]
Backend: [BACKEND]
Engine: [ENGINE]</code></pre>

<p>Every line except “Name:” is optional.</p>

<ul>
  <li><strong>[VERSION]</strong> can be replaced with the minimum version of Serendipity that is required to power your theme. Simply set the version number of your current installation where you developed a theme with.</li>
  <li><strong>[BACKEND]</strong> can hold the string “Yes” if your theme also provides a Backend theme. Leave out this line, if no Backend is provided</li>
  <li><strong>[ENGINE]</strong> can hold the string of any theme directory (i.e. “bulletproof”, “2k11”, “default”) to specify, which fallback to use.</li>
</ul>

<p id="template-fallback-cascade">An <strong> extended note</strong> about the Serendipity template fallback cascade:</p>

<p>If an ENGINE theme is not provided, a <strong>Frontend</strong> theme will first fall back to the <code>$serendipity['defaultTemplate']</code> (so called the <strong>standard</strong> template) “2k11/” files and then grabs files from the “default/” template pool. In the <strong>Backend</strong> (*) this is slightly different, since we do not have engines, but need to grab the Backend theme correctly. So the cascade iterates from “yourTheme/”, to the chosen Backend theme, eg. “2styx/”, followed by the standard Backend theme in “default/”. Both path the “plugins/” directory to get necessary template files not found in themes yet.</p>

<p>Needless to say, that the cascade iteration is being stopped, when the searched template file is found. <strong>First come, first serve!</strong></p>

<p>(*) Some special Backend images and the designated and <em>special cased</em> “serendipity_editor.js” Backend template file(s), follow the Frontend principles of “default/” first, while being called from the “external_plugin” plugin API hook, or by “Frontend designed” callers, outside the current cascade array.</p>

<h4 id="docs-previewpng-preview_fullsizejpg">preview.png, preview_fullsize.jpg</h4>

<p>These image files represent the thumbnails for the theme. “preview.png” is a small thumbnail (usually around 100-150px wide), while preview_fullsize.jpg is used for a large screenshot. Since Serendipity 2.0 and the default thumb width of 400px the latter is used per default.</p>

<h4 id="docs-configincphp">config.inc.php</h4>

<p>This is another very central file of a theme, but it is optional. If that file is present, it is included just after Smarty is initialized by the core. This means that this file can use the whole range of Serendipity API functions and extend the Smarty framework with any custom Smarty modifiers or function you would like.</p>

<p>Also, this file is responsible for setting up theme options.</p>

<p>Please make sure that this file always contains those lines at the top:</p>

<pre><code>&lt;?php
if (IN_serendipity !== true) {
  die ("Don't hack!");
}</code></pre>

<p>This ensures that the file can only be called from within the Serendipity framework, and not by outside HTTP calls.</p>

<h5 id="docs-defining-custom-smarty-functionsmodifiers--executing-custom-php">Defining custom Smarty functions/modifiers / Executing custom PHP</h5>

<p>Since config.inc.php is called after the Smarty framework is initialized, you can easily access <code>$serendipity['smarty']</code> to register custom functions:</p>

<pre><code>&lt;?php
if (IN_serendipity !== true) {
    die ("Don't hack!");
}

// A Smarty modifier is a PHP function that operates on the first parameter and returns content.
function serendipity_smarty_mymodifier($string) {
    return strtolower($string);
    // Simply returns the lowercased version of a string.
}

// A Smarty function can be called with parameters, and returns content.
function serendipity_smarty_myfunction($params, $template) {
    return 'This function has been called with those parameters: &lt;pre&gt;' . print_r($params, true) . '&lt;/pre&gt;';
    // Simply returns a HTML statement with passed parameters
}

$serendipity['smarty']-&gt;registerPlugin('modifier', 'mymodifier', 'serendipity_smarty_mymodifier');
$serendipity['smarty']-&gt;registerPlugin('function', 'myfunction', 'serendipity_smarty_myfunction');</code></pre>

<p>Note that you first need to actually define your functions in the PHP scope, and then you need to use the <code>$serendipity['smarty']-&gt;registerPlugin()</code> call to make it available to Smarty templates.</p>

<ul>
  <li>The first parameter to <code>registerPlugin()</code> defines whether to make a modifier or a function known.</li>
  <li>The second parameter defines how the function is called in a Smarty template: <code>{$variable|mymodifier}</code> or <code>{myfunction param1="value"}</code>.</li>
  <li>The third parameter is the actual name of the PHP function that will be called.</li>
</ul>

<p>Of course you can also use the other Smarty API functions to assign special variables you might need for your theme:</p>

<pre><code>$serendipity['smarty']-&gt;assign('my_ip', $_SERVER['REMOTE_ADDR']);</code></pre>

<p>If you want to include foreign PHP scripts to show them on your own page, consider using the “External PHP” or “Wrap URL” event plugins available via Spartacus - or of course, creating your own simple PHP Serendipity Plugin. Head over to the <a href="./plugin-api.html">Plugin API Docs</a> for more information about this.</p>

<h5 id="docs-using-smarty-in-entries">Using Smarty in entries</h5>

<p>The “Markup: Smarty” plugin allows you to insert Smarty markup into your entries, complete with the power Smarty offers you. PHP within entries is not allowed, as it imposes a huge security risk.</p>

<p>Of course you can use the method of a config.inc.php file as described above to register your custom PHP code, which you can then re-use inside your entry code!</p>

<p>So you can declare a my_magic_function() which executes the PHP code you want, and if you register the function inside the config.inc.php file you can re-use it in your entry.</p>

<h5 id="docs-listen-on-plugin-hooks">Listen on Plugin Hooks</h5>

<p>A themes’s config.inc.php file can also hook into the Serendipity code flow. Usually this is done only by plugins. Offering this functionality in a theme has the benefit that a user does not require to install additional plugins to perform minor tasks. Also hooking into events like the CSS and JS generation is important for themes.</p>

<p>You can read more about plugin hooks <a href="./plugin-api.html#docs-important-event-hooks">here</a>.</p>

<p>To make a theme hook into the “js” hook to add some javascript to the Frontend, a function needs to be defined. This is done by a central function called <code>serendipity_plugin_api_event_hook</code>:</p>

<pre><code>if (IN_serendipity !== true) {
    die ("Don't hack!");
}

// The parameter order and default values should always look the same:
function serendipity_plugin_api_event_hook($event, &amp;$bag, &amp;$eventData, $addData = null) {
    global $serendipity;

    switch($event) {
        case 'js':
            echo '$(document).ready(function() { console.log("Theme loaded!"); }';
            break;

        default:
            return false;
    }
    return true;
} else {
    return false;
}</code></pre>

<p>For each additional event hook the theme wants to “listen on”, you can add multiple cases for those:</p>

<pre><code>if (IN_serendipity !== true) {
    die ("Don't hack!");
}

// The parameter order and default values should always look the same:
function serendipity_plugin_api_event_hook($event, &amp;$bag, &amp;$eventData, $addData = null) {
    global $serendipity;

    switch($event) {
        case 'js':
            echo '$(document).ready(function() { console.log("Frontend-Theme loaded!"); }';
            break;

        case 'js_backend':
            echo '$(document).ready(function() { console.log("Backend-Theme loaded!"); }';
            break;

        default:
            return false;
    }
    return true;
} else {
    return false;
}</code></pre>

<p>The examples above are trivial, but the usage nearly unlimited. Themes can provide any kind of plugin as internal functionality, even with complete plugin output that hooks into saving entries, offering new Frontend functionality and anything else you can think of.</p>

<h5 id="docs-custom-entryproperties">Custom Entryproperties</h5>

<p><strong>Using the plugin serendipity_event_entryproperties</strong></p>

<p>Serendipity allows you to define custom fields within your entry, which you can display within an entry. For that you need to enable the serendipity_event_entryproperties plugin.</p>

<p>That means, you can create two custom fields called Listening and Playing (don’t use whitespace or special characters for fieldnames). Create an entry, and fill in values for those two fields. Now edit your ‘entries.tpl’ template and place the Smarty Codes</p>

<pre><code>Now listening to: {$entry.properties.ep_Listening}
Now playing: {$entry.properties.ep_Playing}</code></pre>

<p>anywhere you like inside the entry loop. Remember to prefix your property keyname with “ep_”. Then you’ll see those fields at the place you configured. You can also add the usual Smarty markup to check if a variable is empty, and add some DIV or other tags to surround your output.</p>

<p>Now if you don’t want to show actually fixed customFields of an entry, but instead make your own plugin insert stuff at that place, you can do that either by the custom function calls mentioned above, or by making your plugin alter the <code>$entry['properties']</code> array to inject new content.</p>

<p>Your plugin can just hook into one of the events where entries are fetched (‘entry_display’ or ‘frontend_display’ or even ‘frontend_entryproperties’) and then just set your <code>$eventData</code> property index to what you want to be displayed later on. As your template already contains the display code from above, it will just pick up the new <code>$entry['properties']</code> data from your custom plugin and show it, just as if you entered it on the entry creation screen.</p>

<p><strong>Using a theme’s entryproperties</strong></p>

<p>Also, a theme can define a set of custom entryproperties on its own, using the customized event hooks described above.</p>

<p>To do that, you place this code in the config.inc.php file. The code consists of three parts: A helper function to get custom options, a helper function to set custom options, and the helper function to hook into plugin output to display the input form in the Backend.</p>

<p>The code below integrates the custom entry property fields “entry_subtitle” and “entry_specific_header_image”, which are later available in the Smarty file as <code>{$entry.properties.entry_subtitle}</code> and <code>{$entry.properties.entry_specific_header_image}</code>.</p>

<pre><code>&lt;?php
// Save custom field variables within the serendipity "Edit/Create Entry" backend.
//                Any custom variables can later be queried inside the .tpl files through
//                  {if $entry.properties.key_value == 'true'}...{/if}

// Function to get the content of a non-boolean entry variable
function entry_option_get_value($property_key, &amp;$eventData) {
    global $serendipity;
    if (isset($eventData['properties'][$property_key])) return $eventData['properties'][$property_key];
    if (isset($serendipity['POST']['properties'][$property_key])) return $serendipity['POST']['properties'][$property_key];
     return false;
}

// Function to store form values into the serendipity database, so that they will be retrieved later.
function entry_option_store($property_key, $property_val, &amp;$eventData) {
    global $serendipity;

    $q = "DELETE FROM {$serendipity['dbPrefix']}entryproperties WHERE entryid = " . (int)$eventData['id'] . " AND property = '" . serendipity_db_escape_string($property_key) . "'";
    serendipity_db_query($q);

    if (!empty($property_val)) {
        $q = "INSERT INTO {$serendipity['dbPrefix']}entryproperties (entryid, property, value) VALUES (" . (int)$eventData['id'] . ", '" . serendipity_db_escape_string($property_key) . "', '" . serendipity_db_escape_string($property_val) . "')";
        serendipity_db_query($q);
    }
}

function serendipity_plugin_api_event_hook($event, &amp;$bag, &amp;$eventData, $addData = null) {
    global $serendipity;

    // Check what Event is coming in, only react to those we want.
    switch($event) {

        // Displaying the backend entry section
        case 'backend_display':
            // INFO: The whole 'entryproperties' injection is easiest to store any data you want. The entryproperties plugin
            // should actually not even be required to do this, as serendipity loads all properties regardless of the installed plugin

            // The name of the variable you want to support
            $entry_subtitle_key = 'entry_subtitle';
            $entry_specific_header_image_key = 'entry_specific_header_image';

            // Check what our special key is set to (checks both POST data as well as the actual data)
            $is_entry_subtitle = (function_exists('serendipity_specialchars') ? serendipity_specialchars(entry_option_get_value($entry_subtitle_key, $eventData)) : htmlspecialchars(entry_option_get_value($entry_subtitle_key, $eventData), ENT_COMPAT, LANG_CHARSET));
            $is_entry_specific_header_image = entry_option_get_value ($entry_specific_header_image_key, $eventData);

            // This is the actual HTML output on the backend screen.
            echo '&lt;div class="entryproperties"&gt;';
            echo '  &lt;input type="hidden" value="true" name="serendipity[propertyform]"&gt;';
            echo '  &lt;h3&gt;' . THEME_ENTRY_PROPERTIES_HEADING . '&lt;/h3&gt;';
            echo '      &lt;div class="entryproperties_customfields adv_opts_box"&gt;';
            echo '          &lt;h4&gt;' . THEME_CUSTOM_FIELD_HEADING . '&lt;/h4&gt;';
            echo '          &lt;span&gt;' . THEME_CUSTOM_FIELD_DEFINITION . '&lt;/span&gt;';
            echo '          &lt;div class="serendipity_customfields clearfix"&gt;';
            echo '              &lt;div class="clearfix form_area media_choose" id="ep_column_' . $entry_subtitle_key . '"&gt;';
            echo '                  &lt;label for="'. $entry_subtitle_key. '"&gt;' . THEME_ENTRY_SUBTITLE . '&lt;/label&gt;';
            echo '                  &lt;input id="entrySubTitle" type="text" value="' . $is_entry_subtitle . '" name="serendipity[properties][' . $entry_subtitle_key . ']" style="width: 100%;"&gt;';
            echo '              &lt;/div&gt;';
            echo '          &lt;/div&gt;';
            echo '          &lt;div class="serendipity_customfields clearfix"&gt;';
            echo '              &lt;div class="clearfix form_area media_choose" id="ep_column_' . $entry_specific_header_image_key . '"&gt;';
            echo '                  &lt;label for="' . $entry_specific_header_image_key . '"&gt;' . THEME_ENTRY_HEADER_IMAGE. '&lt;/label&gt;';
            echo '                  &lt;textarea data-configitem="' . $entry_specific_header_image_key . '" name="serendipity[properties][' . $entry_specific_header_image_key . ']" class="change_preview" id="prop' . $entry_specific_header_image_key . '"&gt;' . $is_entry_specific_header_image . '&lt;/textarea&gt;';
            echo '                  &lt;button title="' . MEDIA . '" name="insImage" type="button" class="customfieldMedia"&gt;&lt;span class="icon-picture"&gt;&lt;/span&gt;&lt;span class="visuallyhidden"&gt;' . MEDIA . '&lt;/span&gt;&lt;/button&gt;';
            echo '                  &lt;figure id="' . $entry_specific_header_image_key . '_preview"&gt;';
            echo '                      &lt;figcaption&gt;' . PREVIEW . '&lt;/figcaption&gt;';
            echo '                      &lt;img alt="" src="' . $is_entry_specific_header_image . '"&gt;';
            echo '                  &lt;/figure&gt;';
            echo '              &lt;/div&gt;';
            echo '          &lt;/div&gt;';
            echo '      &lt;/div&gt;';
            echo ' &lt;/div&gt;';

            break;

        // To store the value of our entryproperties
        case 'backend_publish':
        case 'backend_save':
            // Call the helper function with all custom variables here.
            entry_option_store('entry_subtitle', $serendipity['POST']['properties']['entry_subtitle'], $eventData);
            entry_option_store('entry_specific_header_image', $serendipity['POST']['properties']['entry_specific_header_image'], $eventData);
            break;
    }
}
?&gt;</code></pre><br>

<h5 id="docs-theme-options">Theme Options</h5>

<p>A theme can offer complex configuration for any kind of options. Those can be evaluated by the template files and affect anything from custom header images up to different entry listings or magazine-style themes.</p>

<p>The theme configuration is actually a lot like the configuration offered by plugins, from both a developer as well a user standpoint.</p>

<p>Theme options are defined in the config.inc.php file of a theme, and are listed in an array <code>$template_config</code>. Each array key represents one configuration option, and each configuration option has a subset of specific keys that describe how it is configured.</p>

<p>The “var” type of each array indicates the name that you can later use to access a template option like this: <code>{$template_option.layouttype}</code>.</p>

<p>An example (copied from the bulletproof theme):</p>

<pre><code>$template_config = array(
   array(
        'var'           =&gt; 'infobp',
        'name'          =&gt; 'infobp',
        'type'          =&gt; 'custom',
        'custom'        =&gt; USER_STYLESHEET,
    ),
    array(
        'var'           =&gt; 'layouttype',
        'name'          =&gt; LAYOUT_TYPE,
        'type'          =&gt; 'select',
        'default'       =&gt; '3sbs',
        'select_values' =&gt; array('3sbs' =&gt; LAYOUT_SBS,
                                 '3bss' =&gt; LAYOUT_BSS,
                                 '3ssb' =&gt; LAYOUT_SSB,
                                 '2sb'  =&gt; LAYOUT_SB,
                                 '2bs'  =&gt; LAYOUT_BS,
                                 '1col' =&gt; LAYOUT_SC,
                                 '2sbf' =&gt; LAYOUT_SBF,
                                 '2bsf' =&gt; LAYOUT_BSF)
    ),
    array(
        'var'           =&gt; 'jscolumns',
        'name'          =&gt; JAVASCRIPT_COLUMNS,
        'type'          =&gt; 'boolean',
        'default'       =&gt; 'false',
    ),
    array(
        'var'           =&gt; 'addthisaccount',
        'name'          =&gt; ADDTHIS_ACCOUNT,
        'type'          =&gt; 'string',
        'default'       =&gt; '',
    ),
    array(
        'var'            =&gt; 'example_radio',
        'name'          =&gt; 'An example radio button',
        'type'          =&gt; 'radio',
        'value'         =&gt; array('first', 'second', 'third'),
        'desc'          =&gt; array('The first option', 'The second Option', 'The Third Option');
        'per_row'       =&gt; 1
    )
);</code></pre><br>

<h5 id="docs-configuration-keys">Configuration keys</h5>

<p>This example defines <strong>four</strong> different configuration options. Each configuration option has a specific variable name, a title displayed for the user, an indicator of what type it is, and its available options. Those are defined by these array keys:</p>

<ul>
  <li><strong>var</strong>: Defines what variable name is later used so that you can check for it in the Smarty template files. <code>'var' =&gt; 'layouttype'</code> would later be accessible as <code>{$template_option.layouttype}</code> in the index.tpl file for example.</li>
  <li><strong>name</strong>: This is the string that gets displayed to the user when configuring the theme option. Usually it holds a CONSTANT that is defined in a language file (see below)</li>
  <li><strong>default</strong>: Defines the default value when the user has not yet entered his own</li>
  <li><strong>type</strong>: Specifies, how your option shall be shown to the user. There are several types available, each of those can offer additional required array keys to the base configuration array:
    <ul>
      <li><strong>select</strong>: Offers a select menu.
        <ul>
          <li>The values that are available need to be defined in a ‘<strong>select_values</strong>’ array key (see above example).</li>
          <li>The size of the select field can be changed with the ‘<strong>select_size</strong>’ array key</li>
        </ul>
      </li>
      <li><strong>multiselect</strong>: Like the select menu above, but with multiselection.</li>
      <li><strong>separator</strong>: Emits a simple separator</li>
      <li><strong>tristate</strong>: Offers a “YES”, “NO”, “USE DEFAULT” radio-selection</li>
      <li><strong>boolean</strong>: Offers a “YES, “NO” radio-selection</li>
      <li><strong>radio</strong>: Offers a radio-selection. The available values need to be defined in the ‘<strong>value</strong>’ array key, the matching descriptions in a ‘<strong>desc</strong>’ array key. The ‘<strong>per_row</strong>’ key defines how many radio buttons are displayed on a single row in the configuration.</li>
      <li><strong>string</strong>: Offers a single line input text field</li>
      <li><strong>html</strong>: Offers a textarea input field. Number of rows can be defined with ‘<strong>rows</strong>’ array key. When WYSIWYG editor is enabled, this is shown a a WYSIWYG field.</li>
      <li><strong>text</strong>: Offers a textarea input field. Number of rows can be defined with ‘<strong>rows</strong>’ array key. No WYSIWYG editing available.</li>
      <li><strong>content</strong>: Can be used to emit any kind of HTML on the configuration Backend. The HTML is stored in the ‘<strong>default</strong>’ array key. This is used for information output.</li>
      <li><strong>custom</strong>: Can be used to emit any kind of HTML on the configuration Backend. The HTML is stored in the ‘<strong>default</strong>’ array key. This is used to store custom values.</li>
      <li><strong>hidden</strong>: Can be used to store a hidden HTML input field. The value is fetched from the ‘<strong>value</strong>’ array key.</li>
      <li><strong>media</strong>: Can be used to retrieve a media file location. Array keys ‘<strong>preview_width</strong>’ and ‘<strong>preview_height</strong>’ indicate image sizes.</li>
      <li><strong>sequence</strong>: Can be used for a re-orderable widget with multiple values. For an example, check out the <code>serendipity_event_entryproperties</code> plugin which uses this configuration item. This sequence <strong>type</strong> allows two additional key properties, which are:
        <ul>
          <li><strong>checkable</strong>: If set to true, each ordered sequence widget can be enabled/disabled. When set, retrieving the option later will only list those widgets that were checked. If not set, all available values will always be returned (in the order the user indicated)</li>
          <li><strong>values</strong>: Defines an array that uses a unique key for its configuration and as the value it holds a sub-array with the key ‘<strong>display</strong>’ to provide the HTML output for each re-orderable widget.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>The configuration array is processed through <code>include/functions_plugins_admin.inc.php</code>, <code>serendipity_plugin_config()</code> if you want to see how these arrays are checked. The output of the configuration items is done by the <code>admin/plugin_config.tpl</code> file (which also calls <code>admin/plugin_config_item.tpl</code> for each item).</p>

<h5 id="docs-advanced-theme-options-theme-option-groups">Advanced theme options: Theme option groups</h5>

<p>Theme options can also be put into specific (collapsible) grouping blocks, eg. “bulletproof” theme. To do this, define an array like this in your <code>config.inc.php</code> file of the theme:</p>

<pre><code>$template_config_groups = array(
    THEME_COLORSET  =&gt; array('colorset', 'layouttype', 'jscolumns'),
    THEME_HEADER    =&gt; array('custheader', 'headerimage', 'headertype')
);</code></pre>

<p>The array key defines the theme option group name which gets displayed for the user. In this example case it is a lang constant. The array value defines an array of defined theme options you want to have in that group. Those array values correlate with the name of the theme options that are defined in <code>$template_config</code>.</p>

<h5 id="docs-advanced-theme-options-central-navigation">Advanced theme options: Central navigation</h5>

<p>Serendipity offers an “add-in” for each template config, if you want to offer menu items. To enable this, you need to make Serendipity recognize your custom theme options and merge them with global theme options.</p>

<p>This sounds more complicated than it is; simply add those lines after you have defined <code>$template_config</code>:</p>

<pre><code>// Setup an array to indicate which global theme options should be merged.
$template_global_config = array('navigation' =&gt; true);

// Load the current configuration of the defined theme options and parse them into a helper array
$template_loaded_config = serendipity_loadThemeOptions($template_config, $serendipity['smarty_vars']['template_option'], true);

// Now merge the loaded configuration with the additional global configuration:
serendipity_loadGlobalThemeOptions($template_config, $template_loaded_config, $template_global_config);</code></pre>

<p>Currently only the <strong>navigation</strong> global option is supported, but there might be more in the future. Plus, plugins might provide more global theme options through the use of an event hook we placed for future compatibility.</p>

<p>Internally, serendipity_loadGlobalThemeOptions() simply appends a predefined set of configuration keys to the central array.</p>

<h5 id="docs-internationalization">Internationalization</h5>

<p>Just like plugins, you can make a theme available in multiple languages. For that, you need to define custom translation constants. Create a file like <code>lang_en.inc.php</code> in the theme’s directory and put in the usual PHP definitions:</p>

<pre><code>&lt;?php
@define('MY_THEME_OPTION', 'This is my theme option');
?&gt;</code></pre>

<p>Now you need to load this language file in your theme’s <code>config.inc.php</code> file:</p>

<pre><code>@serendipity_plugin_api::load_language(dirname(__FILE__));</code></pre>

<p>This line ensures that a language file of the current user language is loaded (if it exists!), and also the (ISO) english file is ALWAYS loaded as a fallback.</p>

<p>If you now provide a translation for german, you would add a file <code>lang_de.inc.php</code> with this content:</p>

<pre><code>&lt;?php
@define('MY_THEME_OPTION', 'Dies ist meine Theme-Option');
?&gt;</code></pre>

<p>and save that file also in the UTF-8 subdirectory (the base file should be encoded in ISO-8859-1). Serendipity will automatically now pick up that file.</p>

<h5 id="docs-theme-sidebars">Theme Sidebars</h5>

<p>The variable <code>$sidebars</code> inside a <code>config.inc.php</code> defines an array of which sidebars a theme offers. By default Serendipity provides “left”, “right” and “hidden”. Themes can use this to define specific “footer” and “header” sidebars for example:</p>

<pre><code>$serendipity['sidebars'] = array('left','right','hidden','footer','header');</code></pre>

<p>The plugin manager interface will show one column for each of the configured sidebars, so that people can move around plugins from one to the other location.</p>

<p>Note that no spaces are allowed in sidebar names, and no sidebar name may be longer than 6 characters.</p>

<p>If you want that users are able to define their own sidebars dynamically, you can simply add a string-type theme option to your list:</p>

<pre><code>$template_config['sidebars'] = array(
    'var'           =&gt; 'sidebars',
    'name'          =&gt; 'Which sidebars to use?',
    'type'          =&gt; 'string',
    'default'       =&gt; 'left,right,hidden'
)</code></pre><br>

<h4 id="docs-specific-frontend-theme-files-and-their-meaning">Specific FRONTEND theme files and their meaning</h4>

<p>Each of those files is not mandatory in your theme directory. If you want to adapt it, you should copy it over from the “2k11” or “default” directory. Only copy over the files you actually change, so that the fallback-chain can work properly (see above).</p>

<h5 id="docs-atomcss">atom.css</h5>

<p>Stylesheet applied to ATOM feeds</p>

<h5 id="docs-style_fallbackcss">style_fallback.css</h5>

<p>It emits CSS rules that all templates should have and is supplied in the templates/default/ subdirectory.
Classes are declared on top of the file, so if you  want to make changes in your own template, you should override the rules on the bottom of your own style.css template.
It is not advised to create your own  style_fallback.css file.</p>

<h5 id="docs-stylecss">style.css</h5>

<p>This is the custom CSS of your theme. If you do not write a theme from scratch, it is advised to use tools like Firebug or Developer Tools to inspect the HTML layout of a page to be able to style it properly.</p>

<h5 id="docs-usercss">user.css</h5>

<p>This file can be used by actual users of your theme. This is where users shall place custom CSS rules that enhance a theme. Theme developers shall NOT bundle such a file, because the file is meant to survive updates of a theme when overwriting a directory with a newer version.</p>

<h5 id="docs-commentformtpl">commentform.tpl</h5>

<p>This file controls the look of your comment form where visitors can comment on your entries.</p>

<h5 id="docs-commentpopuptpl">commentpopup.tpl</h5>

<p>This controls the basic HTML layout of the optional comment popup window.</p>

<h5 id="docs-commentstpl-trackbackstpl">comments.tpl, trackbacks.tpl</h5>

<p>This shows the available comments and trackbacks made to an entry.</p>

<h5 id="docs-comments_by_authortpl">comments_by_author.tpl</h5>

<p>This controls the layout of the functionality where comments by visitors are shown.</p>

<h5 id="docs-contenttpl">content.tpl</h5>

<p>This is a <strong>master</strong> template that holds your page content area, and depending on the page type (entries overview, entry search, archive page, …) emits different messages.</p>

<h5 id="docs-entries_archivestpl">entries_archives.tpl</h5>

<p>This file holds the display of entry archives (per month / year).</p>

<h5 id="docs-entries_summarytpl">entries_summary.tpl</h5>

<p>This file displays the overview of entry archives (per month/year).</p>

<h5 id="docs-feed_tpl">feed_*.tpl</h5>

<p>These files hold the various RSS/Atom feed template files. Here you could add customization to those feeds.</p>

<h5 id="docs-indextpl">index.tpl</h5>

<p>This is the <strong>main</strong> template file that controls the general look of your page as well as HTML headers, meta tags, CSS embedding, sidebar locations etc.</p>

<h5 id="docs-entriestpl">entries.tpl</h5>

<p>This is the <strong>main</strong> logic file and it tells Serendipity how to format your entry overview, how to loop entries, where to show commentsforms etc.</p>

<h5 id="docs-plugin_calendartpl-plugin_categoriestpl-plugin_staticpagetpl">plugin_calendar.tpl, plugin_categories.tpl, plugin_staticpage.tpl</h5>

<p>Some plugins allow their own templating. Those files are prefixed with “plugin_” and can also come with certain plugins. Putting those files into your template directory will customize the look of that plugin within your theme. The files available by default for bundled plugins are for the Calendar and Categories sidebar plugins. You first need to enable the templating option in the configuration of those plugins, though!</p>

<h5 id="docs-preview_iframetpl">preview_iframe.tpl</h5>

<p>When you create a preview from within the admin interface, this file controls the basic look of the embedded IFRAME holding the preview. You need to adapt this file if your preview looks odd/off.</p>

<h5 id="docs-sidebartpl">sidebar.tpl</h5>

<p>This file controls how the list of sidebar plugins is displayed in the Frontent.</p>

<h5 id="docs-media_showitemtpl">media_showitem.tpl</h5>

<p>If a media database file is shown in the Frontend, this file controls its layout.</p>

<h5 id="docs-img-subfolder-and-others">“img/” subfolder and others</h5>

<p>Of course your theme can hold its own assets and javascript file. You can put them anywhere you like. Most themes use a “js” and “img” subdirectory.</p>

<p>Most notably the files back.png/forward.png (for calendar icons) and xml.gif (RSS feed icons) are fetched from this directory by many plugins.</p>

<p><strong>Custom emoticons</strong></p>

<p>The Serendipity Emoticate plugin allows to transform usual emoticon texts to graphics. You may want to tweak those to match your template look.</p>

<p>To customize smilies with individual images from a theme, you can create the file ‘emoticons.inc.php’ inside this theme directory and use an array like this:</p>

<pre><code>&lt;?php
   $serendipity['custom_emoticons'] = array(
     ":'("  =&gt; serendipity_getTemplateFile('img/cry_smile.gif'),
     ':-)'  =&gt; serendipity_getTemplateFile('img/regular_smile.gif'),
     ':-O'  =&gt; serendipity_getTemplateFile('img/embaressed_smile.gif'),
     ':O'   =&gt; serendipity_getTemplateFile('img/embaressed_smile.gif')
    );
?&gt;</code></pre>

<p>This will override the default list of emoticons set inside the file “plugins/serendipity_event_emoticate/serendipity_event_emoticate.php” and use the ones you created for your template.</p>

<p>Alternatively, you can also simply deliver a set of image files that match the default image file names.</p>

<h5 id="docs-jquery">jQuery</h5>

<p>As Serendipity uses the <a href="http://jquery.com/">jQuery</a> library in the Backend, we emit jQuery (in <code>noConflict</code> mode) in the Frontend as well. Please do <strong>not</strong> include an additional version of jQuery in your themes (or plugins).</p>

<h4 id="docs-smarty-methods">Smarty methods</h4>

<p>Serendipity offers a list of custom Smarty methods and functions that can be used by the template files. They are defined in the “serendipity_smarty_init()” function inside “include/functions_smarty.inc.php”.</p>

<h5 id="docs-smarty-modifiers">Smarty modifiers</h5>

<p>The name in brackets is the PHP function that is called and defined in “include/functions_smarty.inc.php”, the bold name is how you actually call the modifier in Smarty with <code>{$variable|makeFilename}</code> for example.</p>

<p>The first parameter is always the variable that the modifier gets applied to.</p>

<ul>
  <li><strong>makeFilename</strong> (serendipity_makeFilename): Transform a string into a URL-compatible string. A second parameter indicates if also dots (.) shall be removed from the string.</li>
  <li><strong>emptyPrefix</strong> (serendipity_emptyPrefix): Check if a string is not empty and prepend a prefix in that case. Else, leave empty. Second parameter is a prefix.</li>
  <li><strong>formatTime</strong> (serendipity_smarty_formatTime): Formats a timestamp. Second parameter is the strftime-compatible placeholder, third parameter whether timezone offsets are calculated, fourth parameter whether valid unix timestamps are checked, fifth parameter indicates if the <code>date</code> PHP function shall be used instead of <code>strftime</code>.</li>
  <li><strong>serendipity_utf8_encode</strong> (serendipity_utf8_encode): UTF-8 encodes a string (if not already in UTF-8 charset)</li>
  <li><strong>ifRemember</strong> (serendipity_ifRemember): Returns a cookie-stored variable. Second parameter controls default value, third parameter whether a default is specified, fourth parameter whether a value is stored in a radio-selectbox.</li>
  <li><strong>checkPermission</strong> (serendipity_checkPermission): Checks if the author has specific permissions. Second parameter can specify a different author id than the currently logged in author, third parameter is whether all permission groups of a user are returned.</li>
  <li><strong>serendipity_refhookPlugin</strong> (serendipity_smarty_refhookPlugin): Executes a plugin API event and specifies <code>$eventData</code> as a parameter. Second parameter is the hook to execute, third parameter possible additional Data <code>$addData</code>.</li>
  <li><strong>serendipity_html5time</strong> (serendipity_smarty_html5time): Returns a timestamp in valid HTML5 format</li>
  <li><strong>rewriteURL</strong> (serendipity_rewriteURL): Return a permalink for a given permalink type. Second parameter indicates if the full URL or only a relative path is returned, third parameter indicates if possible URL-rewriting shall be discarded.</li>
</ul>

<h5 id="docs-smarty-functions">Smarty functions</h5>

<p>Smarty functions are meant to be executed on their own and will return their content at the place of where you put the function call. In distinction to Smarty modifiers, function calls are executed with exact parameters and cannot be “stacked” upon each other like a <code>{$variable|modifier1|modifier2|...}</code> call.</p>

<p>The name in brackets is the PHP function that is called and defined in “include/functions_smarty.inc.php”, the bold name is how you actually call the function in Smarty with <code>{serendipity_printSidebar param1="value" param2="value" ...}</code> for example. The list of parameters is indented below.</p>

<ul>
  <li><strong>serendipity_printSidebar</strong> (serendipity_smarty_printSidebar): Prints the list of sidebar plugins.
    <ul>
      <li><span class="var">side</span>: The name of the sidebar, i.e. “left”, “right”, “hide”</li>
      <li><span class="var">template</span>: The name of the Smarty template file to render a plugin with (default: “sidebar.tpl”)</li>
      <li><strong>EXAMPLE</strong>: <pre><code>{serendipity_printSidebar side="left|right|hide|*" template="yourtemplate.tpl"}</code></pre></li>
    </ul>
  </li>
  <li><strong>serendipity_hookPlugin</strong> (serendipity_smarty_hookPlugin): Executes a hook of the Plugin API and return content.
    <ul>
      <li><span class="var">hook</span>: The name of the event hook to call. Available names are: ‘frontend_header’, ‘entries_header’, ‘entries_footer’, ‘frontend_comment’, ‘frontend_footer’. If other hooks are meant to be executed, the following parameter needs to be set:</li>
      <li><span class="var">hookAll</span>: If set to true, any plugin API event hook can be executed.</li>
      <li><span class="var">data</span>: Passes the <code>$eventData</code> for the event</li>
      <li><span class="var">addData</span>: Passes optional additional <code>$addData</code> for the event</li>
      <li>External variable <code>$serendipity['skip_smarty_hooks']</code> is evaluated, if set to “true” no plugins will be executed. This is for specific recursive calls of event hooks and used internally.</li>
      <li>External variable <code>$serendipity['skip_smarty_hook']</code> can contain an array of plugin hooks to not execute.  This is for specific recursive calls of event hooks and used internally.</li>
      <li><strong>EXAMPLE</strong>: <pre><code>{serendipity_hookPlugin hook="hookname" hookAll="true|false" data=$eventData addData=$addData}</code></pre></li>
    </ul>
  </li>
  <li><strong>serendipity_showPlugin</strong> (serendipity_smarty_showPlugin): Shows the output of a specific sidebar plugin.
    <ul>
      <li><span class="var">class</span>: The classname of the plugin to show, like “serendipity_plugin_quicksearch”</li>
      <li><span class="var">id</span>: A distinct ID of a plugin to show (see database table “<strong>serendipity_plugins</strong>”)</li>
      <li><span class="var">side</span>: Which sidebar the plugins belongs to. If set to “*”, the sidebar will not matter.</li>
      <li><span class="var">negate</span>: If set, reverts the previous filters, can be used to “Show all plugins EXCEPT …”.</li>
      <li><span class="var">empty</span>: Can be set to a string that is shown, when the plugin output was empty.</li>
      <li><span class="var">template</span>: Can be set to a sidebar template file other than the default “sidebar.tpl”</li>
      <li><strong>EXAMPLE</strong>: <pre><code>{serendipity_showPlugin class="serendipity_your_nugget" id="serendipity_your_plugin:21323223efsd22aa" side="left|right|hide|*" negate="null|true"}</code></pre></li>
    </ul>
  </li>
  <li><strong>serendipity_getFile</strong> (serendipity_smarty_getFile): Get the full path to a template file. The file is searched in the usual template fallback mechanism, so it can also be fetched from the default location.
    <ul>
      <li><span class="var">file</span>: The name of the template file (i.e. “img/preview.png”).</li>
      <li><strong>EXAMPLE</strong>: <pre><code>{serendipity_getFile file="img/preview.png"}</code></pre></li>
    </ul>
  </li>
  <li><strong>serendipity_printComments</strong> (serendipity_smarty_printComments): Shows the comments to an entry with a specified Smarty template
    <ul>
      <li><span class="var">template</span>: Indicates which Smarty template file to render comments with</li>
      <li><span class="var">block</span>: Indicates the name of a temporary placeholder for the comments output (defaults to <code>{$COMMENTS}</code>.</li>
      <li><span class="var">trace</span>: Nested comments are nested with a “1.3.1.1” like terminology. You can specify a used prefix here.</li>
      <li><span class="var">depth</span>: Defines the starting depth of nested comments (0)</li>
      <li><span class="var">entry</span>: Holds the entry ID to which comments shall be printed</li>
      <li><span class="var">order</span>: Defines the sorting order of comments (ASC or DESC)</li>
      <li><span class="var">mode</span>: Defines a viewing mode (<code>$CONST.VIEWMODE_THREADED</code> or <code>$CONST.VIEWMODE_LINEAR</code>)</li>
      <li><span class="var">limit</span>: How many comments to fetch (0 means all)</li>
      <li><strong>EXAMPLE</strong>: <pre><code>{serendipity_printComments entry="123" mode=$CONST.VIEWMODE_LINEAR}</code></pre></li>
    </ul>
  </li>
  <li><strong>serendipity_printTrackback</strong> (serendipity_smarty_printTrackbacks): Shows the trackbacks to an entry with a specified Smarty template
    <ul>
      <li><span class="var">template</span>: Indicates which Smarty template file to render trackbacks with</li>
      <li><span class="var">block</span>: Indicates the name of a temporary placeholder for the trackbacks output (defaults to <code>{$TRACKBACKS}</code>.</li>
      <li><span class="var">trace</span>: Trackbacks are enumerated, you can specify a prefix here.</li>
      <li><span class="var">entry</span>: Holds the entry ID to which trackbacks shall be printed</li>
      <li><strong>EXAMPLE</strong>: <pre><code>{serendipity_printTrackbacks entry="123"}</code></pre></li>
    </ul>
  </li>
  <li><strong>serendipity_rss_getguid</strong> (serendipity_smarty_rss_getguid): Returns a canonical permalink to an entry.
    <ul>
      <li><span class="var">entry</span>: The entry ID</li>
      <li><span class="var">is_comments</span>: Whether a permalink for a comment feed should be embedded</li>
    </ul>
  </li>
  <li><strong>serendipity_fetchPrintEntries</strong> (serendipity_smarty_fetchPrintEntries): A central function to print/display Blog entries, which can be used to place different entry boxes in a magazine-like fashion. The function combines parameters for fetching and displaying
    <ul>
      <li>Parameters for <strong>fetching</strong>:
        <ul>
          <li><span class="var">category</span>: The category ID (separate multiple with “;”) to fetch entries from</li>
          <li><span class="var">viewAuthor</span>: The author ID (separate multiple with “;”) to fetch entries from</li>
          <li><span class="var">page</span>: The number of the page for paginating entries</li>
          <li><span class="var">id</span>: The ID of an entry. If given, only a single entry will be fetched. If left empty, multiple entries are fetched.</li>
          <li><span class="var">range</span>: Restricts fetching entries to a specific timespan. Behaves differently depending on the type:
            <ul>
              <li><span class="var">Numeric</span>: YYYYMMDD - Shows all entries from YYYY-MM-DD. If DD is “00”, it will show all entries from that month. If DD is any other number, it will show entries of that specific day.</li>
              <li>2-Dimensional Array:
                <ul>
                  <li>Key #0   - Specifies the start timestamp (unix seconds)</li>
                  <li>Key #1   - Specifies the end timestamp (unix seconds)</li>
                </ul>
              </li>
              <li>Other (null, 3-dimensional Array, …): Entries newer than <code>$modified_since</code> will be fetched</li>
            </ul>
          </li>
          <li><span class="var">full</span>: Indicates if the full entry will be fetched (body+extended: TRUE), or only the body (FALSE).</li>
          <li><span class="var">limit</span>: Holds a “Y” or “X, Y” string that tells which entries to fetch. “X” is the first entry offset, “Y” is number of entries. If not set, the global fetchLimit will be applied (15 entries by default)</li>
          <li><span class="var">fetchDrafts</span>: Indicates whether drafts should be fetched (TRUE) or not</li>
          <li><span class="var">modified_since</span>: Holds a unix timestamp to be used in conjunction with <code>$range</code>, to fetch all entries newer than this timestamp</li>
          <li><span class="var">orderby</span>: Holds the SQL “ORDER BY” statement.</li>
          <li><span class="var">filter_sql</span>: Can contain any SQL code to inject into the central SQL statement for fetching the entry</li>
          <li><span class="var">noCache</span>: If set to TRUE, all entries will be fetched from scratch and any caching is ignored</li>
          <li><span class="var">noSticky</span>: If set to TRUE, all sticky entries will NOT be fetched.</li>
          <li><span class="var">select_key</span>: Can contain a SQL statement on which keys to select. Plugins can also set this, pay attention!</li>
          <li><span class="var">group_by</span>: Can contain a SQL statement on how to group the query. Plugins can also set this, pay attention!</li>
          <li><span class="var">returncode</span>: If set to “array”, the array of entries will be returned. “flat-array” will only return the articles without their entryproperties. “single” will only return a 1-dimensional array. “query” will only return the used SQL.</li>
          <li><span class="var">joinauthors</span>: Should an SQL-join be made to the AUTHORS DB table?</li>
          <li><span class="var">joincategories</span>: Should an SQL-join be made to the CATEGORIES DB table?</li>
          <li><span class="var">joinown</span>: SQL-Parts to add to the “JOIN” query</li>
          <li><span class="var">entryprops</span>: Condition list of comma separated entryproperties that an entry must have to be displayed (example: “ep_CustomField=’customVal’,ep_CustomField2=’customVal2’”)</li>
        </ul>
      </li>
      <li>Parameters for <strong>displaying</strong>:
        <ul>
          <li><span class="var">template</span>: Name of the template file to print entries with</li>
          <li><span class="var">preview</span>: Indicates if this is a preview</li>
          <li><span class="var">block</span>: The name of the Smarty block that this gets parsed into</li>
          <li><span class="var">use_hooks</span>: Indicates whether to apply footer/header event hooks</li>
          <li><span class="var">use_footer</span>: Indicates whether the pagination footer should be displayed</li>
          <li><span class="var">groupmode</span>: Indicates whether the input <code>$entries</code> array is already grouped in preparation for the Smarty <code>$entries</code> output array [TRUE], or if it shall be grouped by date [FALSE]</li>
          <li><span class="var">skip_smarty_hooks</span>: If TRUE, no plugins will be executed at all</li>
          <li><span class="var">skip_smarty_hook</span>: Can be set to an array of plugin hooks to NOT execute</li>
          <li><span class="var">prevent_reset</span>: If set to TRUE, the Smarty <code>$entries</code> array will NOT be cleared. (to prevent possible duplicate output of entries)</li>
          <li><span class="var">short_archives</span>: If set to true and an archive listing is displayed, uses the short variant.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>serendipity_getTotalCount</strong> (serendipity_smarty_getTotalCount): Get total count for specific objects (like comments, entries etc.)
    <ul>
      <li><span class="var">what</span>: Can be set to either “entries”, “trackbacks” or “comments” to get the specific amounts.</li>
    </ul>
  </li>
  <li><strong>pickKey</strong> (serendipity_smarty_pickKey): Helper function to return a specific array key of a multi-dimensional array.
    <ul>
      <li><span class="var">array</span>: The array to search in</li>
      <li><span class="var">key</span>: The array key to return if found</li>
      <li><span class="var">default</span>: The default string to return when an array does not contain the key searched for.</li>
    </ul>
  </li>
  <li><strong>serendipity_showCommentForm</strong> (serendipity_smarty_showCommentForm): Displays the comment form
    <ul>
      <li><span class="var">id</span>: An entryid to show the commentform for</li>
      <li><span class="var">entry</span>: The array of <code>$entry</code> data that the commentform is for</li>
      <li><span class="var">url</span>: URL to point the commentform to (defaults to Serendipity core)</li>
      <li><span class="var">comments</span>: Optional array of contained comments</li>
      <li><span class="var">data</span>: possible pre-submitted values to the input values</li>
      <li><span class="var">showToolbar</span>: Whether to show extended options to the comment form</li>
      <li><span class="var">moderate_comments</span>: Indicates if comments are accepted</li>
    </ul>
  </li>
  <li><strong>serendipity_getImageSize</strong> (serendipity_smarty_getImageSize): Sets information about image size of a file
    <ul>
      <li><span class="var">file</span>: The file to check the size for. The file is checked for first related to the DOCUMENT_ROOT, then (if not found) from the template subdirectory.</li>
      <li><span class="var">assign</span>: Name of a Smarty parameter where the image size is saved into</li>
    </ul>
  </li>
  <li><strong>serendipity_getConfigVar</strong> (serendipity_smarty_getConfigVar): Returns a Serendipity configuration variable
    <ul>
      <li><span class="var">key</span>: The name of the configuration variable</li>
    </ul>
  </li>
  <li><strong>serendipity_setFormToken</strong> (serendipity_smarty_setFormToken): Sets the XSS-prevention form token (a unique hash)
    <ul>
      <li><span class="var">type</span>: If set to “form”, a whole <code>&lt;input /&gt;</code> element will be returned. If set to “url” a URL-compatible string (key=value) will be returned. Else, only the token itself will be returned.</li>
    </ul>
  </li>
</ul>

<h4 id="docs-serendipity-smarty-layer">Serendipity Smarty Layer</h4>

<p>Serendipity uses it’s own layer on top of Smarty to offer some backwards compatibility and default setup. This class <code>Serendipity_Smarty</code> is defined in <strong>include/serendipity_smarty_class.inc.php</strong>. It makes sure to only use the Serendipity theme directories, sets the compile directory and offers those backwards compatibility calls:</p>

<ul>
  <li><strong>$serendipity['smarty']-&gt;register_function()</strong> was previously used to register Smarty functions (it is now done by <code>$serendipity['smarty']-&gt;registerPlugin('function', ...)</code>).</li>
  <li><strong>$serendipity['smarty']-&gt;register_modifier()</strong> was previously used to register Smarty modifiers (it is now done by <code>$serendipity['smarty']-&gt;registerPlugin('modifier', ...)</code>).</li>
  <li><strong>$serendipity['smarty']-&gt;assign_by_ref()</strong> was previously used to assign Smarty variables by references (it is now done by <code>$serendipity['smarty']-&gt;assignByRef()</code>).</li>
</ul>

<p>On top of that, a <code>Serendipity_Smarty_Security_Policy</code> class constraints the security settings of Smarty. It allows only calling a set of PHP functions (isset, empty, count, sizeof, in_array, is_array, time, nl2br, class_exists) as well as using PHP functions for modifiers (sprintf, sizeof, count, rand, print_r, str_repeat, nl2br). If a theme or plugin needs to do more, it can override the security settings of Serendipity by setting <code>$serendipity['smarty']-&gt;security = false</code>.</p>

<h4 id="docs-smarty-variables">Smarty variables</h4>

<p>Here is a list of commonly used Smarty variables within the Frontend .tpl files:</p>

<h5 id="docs-raw_data-mixed">$raw_data [<span class="vartype-mixed">mixed</span>]</h5>

<p>If a theme with an old-style “layout.php” is used, this contains the output from that layout.php code.</p>

<p>Scope: *.tpl</p>

<h5 id="docs-plugin_calendar_weeks-array-plugin_calendar_dow-array-plugin_calendar_head-array">$plugin_calendar_weeks [<span class="vartype-array">array</span>], $plugin_calendar_dow [<span class="vartype-array">array</span>], plugin_calendar_head [<span class="vartype-array">array</span>]</h5>

<p>Contains the calendar item data for displaying the sidebar calendar (associative arrays).</p>

<p>Scope: plugin_calendar.tpl</p>

<h5 id="docs-is_form-bool-category_image-string-form_url-string-categories-array">$is_form [<span class="vartype-bool">bool</span>], $category_image [<span class="vartype-str">string</span>], $form_url [<span class="vartype-str">string</span>], $categories [<span class="vartype-array">array</span>]</h5>

<p>Specific variables for displaying the category listing in the sidebar.</p>

<ul class="plainList">
  <li><code>$is_form</code> indicates whether a &lt;form&gt; tag for selecting multiple categories shall be emitted.</li>
  <li><code>$form_url</code> contains the URL to the submission target of the form.</li>
  <li><code>$category</code>_image contains the image filename for the “XML” button.</li>
  <li><code>$categories</code> holds an associative array of the (nested) category listings.</li>
</ul>

<p>Scope: plugin_categories.tpl</p>

<h5 id="docs-plugindata-array-pluginside-string">$plugindata [<span class="vartype-array">array</span>], $pluginside [<span class="vartype-str">string</span>]</h5>

<ul class="plainList">
  <li><code>$plugindata</code> contains an associative array for the output of a sidebar plugin. The keys are ‘side’ (left/right), ‘class’ (CSS), ‘title’ (text), ‘content’ (HTML), ‘id’ (plugin ID).</li>
  <li><code>$pluginside</code> holds the currently rendered sidebar key.</li>
</ul>

<p>Scope: sidebar.tpl</p>

<h5 id="docs-leftsidebarelements-int-rightsidebarelements-int">$leftSidebarElements [<span class="vartype-int">int</span>], $rightSidebarElements [<span class="vartype-int">int</span>]</h5>

<p>Contains the amount of sidebar plugins for each side.</p>

<p>Scope: *.tpl</p>

<h5 id="docs-content_message-string">$content_message [<span class="vartype-str">string</span>]</h5>

<p>Holds some output about the specific error/notice messages from Serendipity (like number of searchresults, no entries found, etc.).</p>

<h5 id="docs-searchresult_tooshort-bool-searchresult_error-bool-searchresult_noentries-bool-searchresult_results-bool">$searchresult_tooShort [<span class="vartype-bool">bool</span>], $searchresult_error [<span class="vartype-bool">bool</span>], $searchresult_noEntries [<span class="vartype-bool">bool</span>], $searchresult_results [<span class="vartype-bool">bool</span>]</h5>

<p>Indicates whether the quicksearch returned errors/results/no entries.</p>

<p>Scope: index.tpl, content.tpl</p>

<h5 id="docs-startpage-bool">$startpage [<span class="vartype-bool">bool</span>]</h5>

<p>If set, then serendipity currently displays the startpage on the Frontend.</p>

<p>Scope: *.tpl</p>

<h5 id="docs-uriargs-array">$uriargs [<span class="vartype-array">array</span>]</h5>

<p>Contains a list of URI arguments passed to the current page.</p>

<p>Scope: *.tpl</p>

<h5 id="docs-is_preview-bool">$is_preview [<span class="vartype-bool">bool</span>]</h5>

<p>If set, the template is currently being called in “preview mode” from the Backend.</p>

<p>Scope: *.tpl</p>

<h5 id="docs-preview-string">$preview [<span class="vartype-str">string</span>]</h5>

<p>Contains the entry preview (parsed ‘entries.tpl’).</p>

<p>Scope: preview_iframe.tpl</p>

<h5 id="docs-commentform_action-string-commentform_id-string-commentform_name-bool-commentform_entry-array">$commentform_action [<span class="vartype-str">string</span>], $commentform_id [<span class="vartype-str">string</span>], $commentform_name [<span class="vartype-str">string</span>], $commentform_email [<span class="vartype-str">string</span>], $commentform_url [<span class="vartype-str">string</span>], $commentform_remember [<span class="vartype-str">string</span>], $commentform_replyTo [<span class="vartype-array">array</span>], $commentform_subscribe [<span class="vartype-str">string</span>], $commentform_data [<span class="vartype-str">string</span>], $is_commentform_showToolbar [<span class="vartype-bool">bool</span>], $is_allowSubscriptions [<span class="vartype-bool">bool</span>], $is_moderate_comments [<span class="vartype-bool">bool</span>], $commentform_entry [<span class="vartype-array">array</span>]</h5>

<p>Multiple variables used for representing the comment form.</p>

<ul class="plainList">
  <li><code>$commentform_action</code> contains the form URL to submit the data to.</li>
  <li><code>$commentform_id</code> contains the ID of the entry to display the form for.</li>
  <li><code>$commentform_name</code>, <code>…_email</code>, <code>…</code>: The specific entered data from the user. Drawn from POST or COOKIE.</li>
  <li><code>$commentform_replyTo</code>: Contains dropdown values for the threaded comment list so far</li>
  <li><code>$is_commentform_showToolbar</code>: Indicates if extended commentform options shall be displayed (admin purpose)</li>
  <li><code>$is_allowSubscriptions</code>: Whether the “mail notifications” option is available</li>
  <li><code>$is_moderate_comments</code>: Whether the current entry requires moderation</li>
  <li><code>$commentform_entry</code>: The associative entry data of the entry being commented on</li>
</ul>

<p>Scope: commentform.tpl</p>

<h5 id="docs-comments-array">$comments [<span class="vartype-array">array</span>]</h5>

<p>The list of (threaded) comments.</p>

<p>Scope: comments.tpl</p>

<h5 id="docs-metadata-array-entries-array-is_comments-bool-last_modified-string-channel_display_dat-string">$metadata [<span class="vartype-array">array</span>], $entries [<span class="vartype-array">array</span>], $is_comments [<span class="vartype-bool">bool</span>], $last_modified [<span class="vartype-str">string</span>], $self_url [<span class="vartype-str">string</span>], $namespace_display_dat [<span class="vartype-str">string</span>], $once_display_dat [<span class="vartype-str">string</span>], $channel_display_dat [<span class="vartype-str">string</span>]</h5>

<p>Contains multiple values for displaying an RSS/ATOM feed.</p>

<ul class="plainList">
  <li><code>$metadata</code> is an associative array containing metadata for the current feed. Array keys: ‘title’ (feed title), ‘description’ (feed description), ‘language’ (feed language), ‘additional_fields’ (specific fields from the syndication plugin), ‘link’ (feed link), ‘email’ (admin email), ‘fullFeed’ (if the feed contains full texts), ‘showMail’ (whether emails are disclosed), ‘version’ (feed version).</li>
  <li><code>$entries</code> holds the associative array of entry data</li>
  <li><code>$is_comments</code> indicates whether this is a comment only feed</li>
  <li><code>$last_modified</code> contains the timestamp of last entry modification</li>
  <li><code>$self_url</code> contains the URL of the current feed</li>
  <li><code>$namespace_display_dat</code> contains additional XML namespaces for the feed as configured per plugins</li>
  <li><code>$channel_display_dat</code> contains additional XML namespaces for the feed as configured per plugins</li>
</ul>

<p>Scope: feed*.tpl</p>

<h5 id="docs-entry_id-int-is_comment_added-bool-comment_url-string-comment_string-bool-is_comment_empty-bool">$entry_id [<span class="vartype-int">int</span>], $is_comment_added [<span class="vartype-bool">bool</span>], $comment_url [<span class="vartype-str">string</span>], $comment_string [<span class="vartype-str">string</span>], $is_showtrackbacks [<span class="vartype-bool">bool</span>], $comment_entryurl [<span class="vartype-str">string</span>], $is_showcomments [<span class="vartype-bool">bool</span>], $is_comment_allowed [<span class="vartype-bool">bool</span>], $is_comment_notadded [<span class="vartype-bool">bool</span>], $is_comment_empty [<span class="vartype-bool">bool</span>]</h5>

<p>Multiple values for showing the comments inside a popup window.</p>

<ul class="plainList">
  <li><code>$entry_id</code> contains the ID of the entry showing the comments</li>
  <li><code>$comment_url</code> contains the URL to submitting a comment to</li>
  <li><code>$comment_entryurl</code> contains the URL to the entry for which comments are shown</li>
  <li><code>$comment_string</code> returns a message after submitting a comment</li>
  <li><code>$is_show_trackbacks</code> indicates whether trackbacks shall be shown</li>
  <li><code>$is_comment_added</code> indicates if a comment has just been added.</li>
  <li><code>$is_showcomments</code> indicates if comments shall be displayed</li>
  <li><code>$is_comment_allowed</code> indicates if comments are allowed</li>
  <li><code>$is_comment_notadded</code> is set when a comment could not be added</li>
  <li><code>$is_comment_empty</code> is set when a comment was submitted with no text</li>
</ul>

<p>Scope: commentpopup.tpl</p>

<h5 id="docs-view-string">$view [<span class="vartype-str">string</span>]</h5>

<p>Indicates the current “view” on the Frontend. One of: “archives, entry, feed, admin, archive, plugin, categories, authors, search, css, js, comments, start, 404”</p>

<p>Scope: *.tpl</p>

<h5 id="docs-footer_prev_page-string-footer_next_page-string-footer_totalentries-string-footer_info-string">$footer_prev_page [<span class="vartype-str">string</span>], $footer_next_page [<span class="vartype-str">string</span>] $footer_totalEntries [<span class="vartype-int">int</span>], $footer_totalPages [<span class="vartype-int">int</span>], $footer_currentPage [<span class="vartype-int">int</span>], $footer_pageLink [<span class="vartype-str">string</span>], $footer_info [<span class="vartype-str">string</span>]</h5>

<p>Specifies multiple variables for showing the pagination footer.</p>

<ul class="plainList">
  <li><code>$footer_prev_page</code>, <code>$footer_next_page</code> and <code>$footer_pageLink</code> contain links to the previous page, next page and the current page.</li>
  <li><code>$footer_totalEntries</code> holds the total number of entries available in the current display scope.</li>
  <li><code>$footer_totalPages</code> holds the total number of pages available in the current display scope.</li>
  <li><code>$footer_currentPage</code> holds the number of the currently viewed page</li>
  <li><code>$footer_info</code> contains a textual representation of which page you are currently viewing (“Page 1 of 5, totaling 20 entries”)</li>
</ul>

<p>Scope: entries.tpl</p>

<h5 id="docs-plugin_clean_page-bool-comments_messagestack-array-is_comment_added-bool-is_comment_moderate-bool-entries-array">$plugin_clean_page [<span class="vartype-bool">bool</span>], $comments_messagestack [<span class="vartype-array">array</span>], $is_comment_added [<span class="vartype-bool">bool</span>], $is_comment_moderate [<span class="vartype-bool">bool</span>], $entries [<span class="vartype-array">array</span>]</h5>

<p>Several variables for showing/parsing entries.</p>

<ul class="plainList">
  <li><code>$plugin_clean_page</code> indicates whether a plugin has taken over parsing ‘entries.tpl’, and not the usual entries listing is displayed.</li>
  <li><code>$comments_messagestack</code> holds an array of output messages when somebody submits a comment (like “comment was added”, “comment was moderated” etc.).</li>
  <li><code>$is_comment_added</code> indicates whether somebody just submitted a comment.</li>
  <li><code>$is_comment_moderate</code> indicates if the current entry being displayed is moderated</li>
  <li><code>$entries</code> is one large, multi-dimensional array that holds all entries being displayed on the current page. Important key indices are:
    <ul>
      <li><strong>title</strong>: The entry title</li>
      <li><strong>html_title</strong>: The unescaped entry title (no htmlspecialchars is applied here)</li>
      <li><strong>body</strong>: The entry body</li>
      <li><strong>extended</strong>: The extended entry</li>
      <li><strong>is_cached</strong>: Whether the current entry markup was cached</li>
      <li><strong>author</strong>: The author name of the entry</li>
      <li><strong>authorid</strong>: The authorid of the entry</li>
      <li><strong>email</strong>: Email address of the author of the entry</li>
      <li><strong>link</strong>: The URL to the current entry</li>
      <li><strong>commURL</strong>: The link to commenting on an entry</li>
      <li><strong>rdf_ident</strong>: RDF metadata unique id</li>
      <li><strong>link_rdf</strong>: RDF metadata URL</li>
      <li><strong>allow_comments</strong>: Whether comments are allowed to this specific entry</li>
      <li><strong>moderate_comments</strong>: Whether comments are moderated for this entry</li>
      <li><strong>viewmode</strong>: If comments of this entry are currently being viewed in LINEAR or THREADED mode</li>
      <li><strong>link_viewmode_threaded</strong>: Link to viewing comments in threaded view</li>
      <li><strong>link_viewmode_linear</strong>: Link to viewing comments in linear view</li>
      <li><strong>link_author</strong>: Link to viewing all entries for the author of the current entry</li>
      <li><strong>link_allow_comments</strong>: An admin link for allowing comments</li>
      <li><strong>link_deny_comments</strong>: An admin link for denying comments</li>
      <li><strong>link_popup_comments</strong>: URL to the popup window for comments to this entry</li>
      <li><strong>link_popup_trackbacks</strong>: URL to the popup window for trackbacks to this entry</li>
      <li><strong>link_edit</strong>: URL to the Backend for editing an entry</li>
      <li><strong>link_trackback</strong>: Trackback-URL for this entry</li>
      <li><strong>categories</strong>: An array of all associated categories to this entry</li>
      <li><strong>has_extended</strong>: If an entry has an extended entry</li>
      <li><strong>is_extended</strong>: If the entry is currently being viewed completely</li>
      <li><strong>has_comments</strong>: Whether the entry has comments</li>
      <li><strong>label_comments</strong>: The text label of a comment (singular/plural)</li>
      <li><strong>has_trackbacks</strong>: Whether the entry has trackbacks</li>
      <li><strong>label_trackbacks</strong>: The text label of a trackback (singular/plural)</li>
      <li><strong>is_entry_owner</strong>: Indicates if the currently logged in user is the owner of this entry</li>
      <li><strong>plugin_display_dat</strong>: Plugin output for this entry</li>
    </ul>
  </li>
</ul>

<p>Scope: entries.tpl</p>

<h5 id="docs-trackbacks-array">$trackbacks [<span class="vartype-array">array</span>]</h5>

<p>Holds an array of trackbacks being displayed</p>

<p>Scope: trackbacks.tpl</p>

<h5 id="docs-head_charset-string-head_version-string-head_title-string-is_logged_in-bool">$head_charset [<span class="vartype-str">string</span>] <em>(deprecated)</em>, $head_version [<span class="vartype-str">string</span>], $head_title [<span class="vartype-str">string</span>], $head_subtitle [<span class="vartype-str">string</span>], $head_link_stylesheet [<span class="vartype-str">string</span>], $is_xhtml [<span class="vartype-bool">bool</span>], $serendipityVersion [<span class="vartype-str">string</span>], $lang [<span class="vartype-str">string</span>], $head_link_script [<span class="vartype-str">string</span>], $head_link_stylesheet_frontend [<span class="vartype-str">string</span>], $is_logged_in [<span class="vartype-bool">bool</span>]</h5>

<p>Multiple variables defining the Serendipity version/language, Blog title and link to Stylesheets. <code>$head_title</code> and <code>$head_subtitle</code> are set according to which action is currently performed on the Frontend (category view, archive view etc.)</p>

<p>Scope: *.tpl</p>

<h5 id="docs-use_popups-bool-is_embedded-bool-is_raw_mode-bool">$use_popups [<span class="vartype-bool">bool</span>], $is_embedded [<span class="vartype-bool">bool</span>], $is_raw_mode [<span class="vartype-bool">bool</span>]</h5>

<p>Indicates if popups are enabled on the Blog, if the Blog is embedded, and if the Blog is using deprecated layout.php styling</p>

<p>Scope: *.tpl</p>

<h5 id="docs-entry_id-int-is_single_entry-bool">$entry_id [<span class="vartype-int">int</span>], $is_single_entry [<span class="vartype-bool">bool</span>]</h5>

<p>If the Frontend is currently displaying a single article, those variables hold the boolean state and entry id.</p>

<p>Scope: *.tpl</p>

<h5 id="docs-blogtitle-string-blogsubtitle-string-blogdescription-string">$blogTitle [<span class="vartype-str">string</span>], $blogSubTitle [<span class="vartype-str">string</span>], $blogDescription [<span class="vartype-str">string</span>]</h5>

<p>Holds the configured Blog’s title, subtitle and description as entered by the admin. Note that those variables will not be changed, unlike the <code>$head_title</code> / <code>$head_subtitle</code> variables!</p>

<p>Scope: *.tpl</p>

<h5 id="docs-serendipityhttppath-string-serendipitybaseurl-string-serendipityrewriteprefix-string-serendipityindexfile-string">$serendipityHTTPPath [<span class="vartype-str">string</span>], $serendipityBaseURL [<span class="vartype-str">string</span>], $serendipityRewritePrefix [<span class="vartype-str">string</span>], $serendipityIndexFile [<span class="vartype-str">string</span>]</h5>

<p>Holds several URL strings for the blog</p>

<p>Scope: *.tpl</p>

<h5 id="docs-category-int-category_info-array">$category [<span class="vartype-int">int</span>], $category_info [<span class="vartype-array">array</span>]</h5>

<p><code>$category</code> holds the current ID of a category, if a category is being viewed. <code>$category_info</code> contains an associative array with the full category data (‘category_name’, ‘parentid’, ‘category_description’ etc.)</p>

<p>Scope: *.tpl</p>

<h5 id="docs-template-string">$template [<span class="vartype-str">string</span>]</h5>

<p>The name of the currently selected template</p>

<p>Scope: *.tpl</p>

<h5 id="docs-daterange-array">$dateRange [<span class="vartype-array">array</span>]</h5>

<p>Holds an array of two timestamps that restrict the date scope of entries being displayed (if set)</p>

<p>Scope: *.tpl</p>

<h5 id="docs-template_option-array---available-only-for-serendipity-11-and-above">$template_option [<span class="vartype-array">array</span>]</h5>

<p>Holds configured template options that were set in the Backend for templates supporting options (like colorsets, navigation links etc.)</p>

<p>Scope: *.tpl</p>

<h3 id="docs-backend-themes">Backend themes</h3>

<p>Serendipity provides its default Backend theme inside the “default/admin” directory. The template files in that directory specify the complete look of the whole admin interface, and also contains workflow and logic as well as javascript libraries.</p>

<p>While you can completely build your own Backend and customize the look of it, the core development continues based on those files. So it is your own responsibility to keep up with Serendipity development to port bugfixes and new features into your own Backend theme, if you wish to change the Smarty templates.</p>

<p>Thus we suggest to only modify the CSS portion of the Backend to adapt the look of it. An even better way to deal with a customized Backend theme is to simply put a “user.css” file into the “default/admin/” subdirectory. Inside that CSS file you can overwrite any CSS rules, and because this file is not part of our core distribution, it will be update-safe for future Serendipity versions.</p>

<p>Having said this, here is a description of what each Backend template does. Note that the described template-fallback mechanism of the Frontend (see above) also applies to the Backend.</p>

<h4 id="docs-specific-backend-theme-files-and-their-meaning">Specific BACKEND theme files and their meaning</h4>

<p>All backend-related theme files are listed in the admin/ subdirectory of a theme.</p>

<h5 id="docs-usercss-1">user.css</h5>

<p>Just like a Frontend theme, a Backend can have it’s own “user.css” file with custom rules. You should not bundle this file with your theme (see note on the Frontend’s user.css).</p>

<h5 id="docs-styling-the-media-manager">Styling the media manager</h5>

<p>The media manager is the only part of the admin interface that is Smarty customizable.</p>

<p>The files for this are in the admin/ subdirectory of your theme:</p>

<p><strong>media_choose.tpl</strong></p>

<p>The main template file of the media manager popup window.</p>

<p><strong>media_items.tpl</strong></p>

<p>The display logic of the specific items in your media database overview.</p>

<p><strong>media_pane.tpl</strong></p>

<p>The header/footer area of the media database overview.</p>

<p><strong>media_properties.tpl</strong></p>

<p>The page which displays properties (keywords, EXIF-information etc.) of a selected image.</p>

<p><strong>media_showitem.tpl</strong></p>

<p>Used when displaying an image via the Frontend of your blog to visitors.</p>

<p><strong>media_upload.tpl</strong></p>

<p>The template file for uploading a single or multiple images.</p>

<h5 id="docs-the-core-workflow">The core workflow</h5>

<p>The following files influence how the actual admin interface operates and looks:</p>

<ul>
  <li>admin/category.inc.tpl</li>
  <li>admin/comment_reply.tpl</li>
  <li>admin/commentform.tpl</li>
  <li>admin/comments.inc.tpl</li>
  <li>admin/comments.tpl</li>
  <li>admin/config_template.tpl</li>
  <li>admin/configuration.inc.tpl</li>
  <li>admin/entries.inc.tpl</li>
  <li>admin/entries.tpl</li>
  <li>admin/groups.inc.tpl</li>
  <li>admin/guess_input.tpl</li>
  <li>admin/images.inc.tpl</li>
  <li>admin/import.inc.tpl</li>
  <li>admin/index.tpl</li>
  <li>admin/installer.inc.tpl</li>
  <li>admin/maintenance.inc.tpl</li>
  <li>admin/media_choose.tpl</li>
  <li>admin/media_gallery.tpl</li>
  <li>admin/media_galleryinsert.tpl</li>
  <li>admin/media_galleryitems.tpl</li>
  <li>admin/media_items.tpl</li>
  <li>admin/media_pane.tpl</li>
  <li>admin/media_properties.tpl</li>
  <li>admin/media_toolbar.tpl
  <li>admin/media_upload.tpl</li>
  <li>admin/oldie.css</li>
  <li>admin/overview.inc.tpl</li>
  <li>admin/personal.inc.tpl</li>
  <li>admin/plugin_config.tpl</li>
  <li>admin/plugin_config_item.tpl</li>
  <li>admin/plugins.inc.tpl</li>
  <li>admin/preview_iconizr.css</li>
  <li>admin/serendipity_editor.js</li>
  <li>admin/serendipity_editor.js.php</li>
  <li>admin/serendipity_editor.js.tpl</li>
  <li>admin/show_plugins.fnc.tpl</li>
  <li>admin/style.css</li>
  <li>admin/templates.inc.tpl</li>
  <li>admin/upgrader.inc.tpl</li>
  <li>admin/users.inc.tpl</li>
  <li>admin/wysiwyg_init.tpl</li>
  <li>admin/doc/</li>
  <li>admin/img/</li>
  <li>admin/font/</li>
  <li>admin/js</li>
</ul>

<h2 id="docs-linking-spartacus">Linking Spartacus</h2>

<p>You can easily combine the whole Spartacus theme and plugin checkouts on your machine. To do that you can for example checkout these repositories to a subdirectory like <code>templates/spartacus/</code> and <code>plugins/spartacus/</code>. The reason this works is because both the theme and plugin framework of Serendipity can iterate through every subdirectory of the “templates/” or “plugins/” structure to search for matching plugin/theme files.</p>

<h2 id="docs-showing-entries-in-foreign-webpages">Showing entries in foreign webpages</h2>

<p>You can quite easily “show” Serendipity entries from other parts of your website, if PHP is available there and you have filesystem access to the Serendipity installation.</p>

<p>You can use the following PHP code to include the Serendipity framework and use the Serendipity API to display entries:</p>

<pre><code>&lt;?php
// 1: Switch to the Serendipity path. We need to use chdir so that the s9y framework can use its relative calls.
chdir('/home/www/public_html/blog/');

// 2: Start the Serendipity API
include 'serendipity_config.inc.php';

// 3: Start Smarty templating
serendipity_smarty_init();

// 4: Get the latest entries
$entries = serendipity_fetchEntries(null, true,1);

// 5: Put all the variables into Smarty
serendipity_printEntries($entries);

// 6: Get the template file
$tpl = serendipity_getTemplateFile('entries.tpl', 'serendipityPath');

// 7: Format and output the entries
$serendipity['smarty']-&gt;display($tpl);

// 8: Go back to where you came from
chdir('/home/www/public_html/');
?&gt;</code></pre>

<p>You can adapt each of the “serendipity_fetchEntries()” / “serendipity_printEntries()” calls to suit your needs. You can of course also pass any other template file instead of ‘entries.tpl’ to the “serendipity_getTemplateFile()” call, so that you can have a custom layout for your entries in the PHP application, and use the default ‘entries.tpl’ template in the real Serendipity installation.</p>

<p>To look up possible functions, check out the “include/functions_entries.inc.php” file of your Serendipity installation to see phpDoc comments above the functions for which parameters you can use.</p>

<h2 id="docs-you-hate-smarty-youve-come-a-long-way">You hate Smarty? You’ve come a long way!</h2>

<p>We love Smarty. But we also covered people like you, who hate it. Since Smarty is a template layer that implements very specific methods, you can simply overwrite it with whatever you like: XML-based transformations, or PHP transformations.</p>

<p>Since we firmly believe in Smarty as a great templating system, we only provide a “proof of concept” theme on how to achieve this, if you are interested. Check out the core delivered themes “default-php” and “default-xml” to see those examples.</p>

<p>Note that even if you use a custom Frontend theme, the Backend will always continue to use Smarty templating, because it would be too much work to port alternate layers for the code.</p>

<h3 id="docs-step-1-create-a-templateincphp-file">Step 1: Create a template.inc.php file</h3>

<p>In your theme directory, create a template.inc.php file with a content like this:</p>

<pre><code>include_once S9Y_INCLUDE_PATH . 'include/template_api.inc.php';
$GLOBALS['template'] = new serendipity_smarty_emulator();
$GLOBALS['serendipity']['smarty'] =&amp; $GLOBALS['template'];</code></pre>

<p>This loads the Serendipity template API layer and implements a Smarty emulator, and it replaces the internal Serendipity Smarty object with your own.</p>

<h3 id="docs-step-2-read-more">Step 2: Read more</h3>

<p>Check out the instructions in the file <code>include/template_api.inc.php</code> if you want to know more about the internal Template API layer.</p>

<p>All it basically does is it wraps the Smarty commands to simple PHP, which collects all variables in a <code>$GLOBALS['tpl']</code> array, that you can access in PHP.</p>

<p>Also, check out the alternate layer <code>serendipity_smarty_emulator_xml</code> which is another way to store all assigned variables in XML language, so you could use XSLT to render your Blog view.</p>

<h3 id="docs-step-3-create-template-files">Step 3: Create template files</h3>

<p>Now instead of using Smarty markup, check out the files like ‘index.tpl’ which simply contain PHP markup to output the <code>$GLOBALS['tpl']['...']</code> values at the place you like.</p>

<p>We have provided a few examples on what to replace with what, but it is more a proof-of-concept that should get you kickstarted.</p>

<h2 id="docs-best-practice-for-themes">Best practice for themes</h2>

<ul>
  <li>Make sure that you only change template files you absolutely must. Serendipity can fallback to use default template files, so if you do not need to change the ‘index.tpl’ file for example, please simply do not provide that file.</li>
  <li>If your templates needs a ‘config.inc.php’ file or custom language files, please try to make those files as small as possible. Performance counts, and PHP code should only be used if the code in there is fit to be executed on each page visit. You can disable Smarty security through <code>$serendipity['smarty']-&gt;security = false</code> - but only do this, if you absolutely must due to custom use of unregistered PHP functions or modifiers calls.</li>
  <li>Please try to properly indent all of your HTML and CSS rules by using 4 spaces (not tabs).</li>
  <li>Please try to use HTML5 or proper XHTML. HTML 4.0 should really no longer be used.</li>
  <li>Please try to make sure your template can be viewed in all modern browsers.</li>
  <li>If you provide foreign language files, also deliver the language files inside the “UTF-8” subdirectory of your template, and save them in UTF-8 encoding. Save all files using UNIX linebreaks (\n) if possible.</li>
</ul>

                </div>
            </div>
        </div>
        <div class="blog-post__footer">
            <div class="blog-post__footer-author site-col__footer-author-container">
                <div class="blog-post__author-avatar-container">
                    <div class="blog-post__author-avatar blog-post__author-avatar--ophian"></div>
                </div>
                <div class="blog-post__author-description">
                    <h3>Ian Styx (ophian)<span>Maintainer</span></h3>
                    <p class="follow"><a href="https://github.com/ophian/styx/issues" title="Styx issues" target="_blank">@ophian</a></p>
                    <p>John Ian Styx has more than 20 years of experience in the IT market as a developer and from 2003 as a Serendipity lover.</p>
                </div>
            </div>
        </div>
    </section>
</main>
<div class="addthis_float_share_toolbox"></div>
<footer class="footer footer--blog" role="contentinfo">
    <div class="section-container footer-site-map">
        <div class="row footer-menu__row">
            <div class="col-xs-12 col-sm-4 footer-menu__container">
                <div class="footer-menu__wrapper" role="navigation" aria-labelledby="menu-category-1-0">
                    <h2 id="menu-category-1-0">Repository</h2>
                    <ul class="footer-menu">
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx/releases" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Downloads</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Code</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/additional_plugins" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Plugins</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx/issues" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Issues</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 footer-menu__container">
                <div class="footer-menu__wrapper" role="navigation" aria-labelledby="menu-category-1-1">
                    <h2 id="menu-category-1-1">Site & Documentation</h2>
                    <ul class="footer-menu">
                        <li class="icon-site"><a href="/">Serendipity Styx Home</a></li>
                        <li class="icon-site"><a href="/blog/">Serendipity Styx Blog</a></li>
                        <li class="icon-site"><a href="/book/">Serendipity Styx Book [de]</a></li>
                        <li class="icon-site"><a href="/plugins/">Serendipity Styx Plugins</a></li>
                        <li class="icon-site"><a href="/themes/">Serendipity Styx Themes</a></li>
                        <li class="icon-site"><a href="/hc/en/faq/">Serendipity Styx FAQ</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 footer-menu__container">
                <div class="footer-menu__wrapper" role="navigation" aria-labelledby="menu-category-1-2">
                    <h2 id="menu-category-1-2">Connect with Styx</h2>
                    <ul class="footer-menu">
                        <li class="icon-site"><a href="/contact/">Contact us</a></li>
                        <li class="icon-site"><a href="/hc/">Help center</a></li>
                        <li class="icon-site"><a href="/about/">About Styx</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-mobile" role="navigation" aria-hidden="true" data-mobile="true">
        <div class="section-container">
            <div class="row">
                <div class="col-xs-12 col-sm-6 footer-mobile__column">
                    <h2>Repository</h2>
                    <ul class="footer-mobile__menu">
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx/releases" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Downloads</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Code</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/additional_plugins" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Plugins</a></li>
                        <li><a class="icon icon--small" href="https://github.com/ophian/styx/issues" target="_blank" rel="noopener"><svg class="icon__body"><use xlink:href="#github"></use></svg> Serendipity Styx Issues</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-6 footer-mobile__column">
                    <h2>Connect with Styx</h2>
                    <ul class="footer-mobile__menu">
                        <li class="icon-site"><a href="/contact/">Contact us</a></li>
                        <li class="icon-site"><a href="/about/">About Styx</a></li>
                        <li class="icon-site"><a href="/hc/">Help center</a></li>
                        <li class="icon-site"><a href="/">Serendipity Styx Home</a></li>
                        <li class="icon-site"><a href="/blog/">Serendipity Styx Blog</a></li>
                        <li class="icon-site"><a href="/book/">Serendipity Styx Book [de]</a></li>
                        <li class="icon-site"><a href="/plugins/">Serendipity Styx Plugins</a></li>
                        <li class="icon-site"><a href="/themes/">Serendipity Styx Themes</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="section-container footer-policy">
        <div class="row">
            <div class="col-xs-12 col-md-6">
                <p class="footer-policy__rights">© 2016 - 2019 Serendipity Styx Edition.</p>
            </div>
            <div class="col-xs-12 col-md-6">
                <ul class="footer-policy__menu">
                    <li class="footer-policy__menu-item"><a href="/legal/">Legal</a></li>
                    <li class="footer-policy__menu-item"><a href="/legal/privacy/">Privacy policy</a></li>
                    <li class="footer-policy__menu-item"><a href="https://opensource.org/docs/definition.php" target="_blank">Open Source</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <svg id="github" viewBox="0 0 24 24">
        <title id="simpleicons-github-icon">GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path>
    </svg>
</svg>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery-3.2.1.min.js"><\/script>')</script>
<script src="/js/jquery.ui.totop.js" type="text/javascript"></script>
<script> 
    $(function(){
        $(document).ready(function() {
            $().UItoTop();
        });
    });
</script>
<a href="#" id="toTop" style="display: inline;"><span id="toTopHover"></span>To Top</a>
<script src="/js/styx.min.js"></script>
</body></html>